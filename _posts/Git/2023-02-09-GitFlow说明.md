---
layout: post
categories: Git
title: GitFlow说明
meta: GitFlow说明
---
* content
{:toc}

## Git

git 包含三种状态:
* 已暂存 (staged)
* 已修改 (modified)
* 已提交 (committed)

版本号 (x.y.z)
* X = 主版本号 (重大升级，不同主版本的库之间是不兼容的)
* Y = 次版本号 (增量升级，增加一些新的接口但保留原有接口。高版本号的库向后兼容低版本的库)
* Z = 维护版本号 (仅修复 Bug) (修改错误，改进性能等，不添加新接口，也不更改接口。
在主版本和次版本相同的前提下，不同维护版本之间完全兼容)
  
## GitFlow 协同工作流

其实GitFlow并非什么技术，而是一种代码开发合并管理流程的思维模式或者是管理方法。大家一起开发的一种软约定。

### 由来

我们为什么需要GitFlow这种git管理流程？原因有以下几点
* 有一个稳定版本的代码分支，可以安心的用在线上发布。
* 在代码提测前或者说是代码达到预发状态时，在测试交付的过程中程序员们还可以继续进行下一个版本的开发工作。
* 有一个分支可以让我们及时的对线上的bug进行修复，这个过程中我们不希望将正在开发中的代码提交到线上生产中去。

由于上述开发过程中面临的需求，GitFlow协同国祚流应运而生。对应的点就是
* 代码共享
* 不同环境下代码互不干扰
* 管理好代码与环境的一致性

### GitFlow中分支角色们

![]({{site.baseurl}}/images/20230209/pic20230209173913.png)

1. Master 分支： 稳定版本代码分支，用作发布环境，上面的每次提交都是可以发布的。
2. Feture 分支： 功能分支，用于开发功能（需求），用于开发环境
3. Developer 分支: 开发分支， 一旦Feture分支内功能开发完成就将Feture中的代码合并到Developer分支中，
合并完成后，删除该功能分支。这个分支对应的是集成测试环境。
4. Release 分支：预发分支，做发布前的准备工作，对应的是预发环境。这个分支可以确保们开发继续向前，
不会因为要发布不而被停滞住。一旦Release分支达到了可发布的状态，我们需要把Release分支同时向Master，
Developer分支上合并，保持代码的一致性，然后把Release分支删除。
5. Hotfix 分支： 线上bug修缮用的分支，每次修改线上代码的bug时都要用hotfix来维护，
完成后向Developer和Master同时合并。完成后删除分支。

以上就是GitFlow中所有角色分支，从中我们可以看到以下几点：
1. Master和Developer需要我们长期维护，也是我们开发的主干线。
2. 其中relesase和hotfix两个分支的操作会很零碎，操作起来会比较麻烦，在这个过程中很容易产生失误，导致代码不一致。
所以我们需要一个号的工具或者脚本来完成此步骤。
3. 这个套流程虽然麻烦，但是他可以应用到几乎所有的开发流程中：瀑布型，敏捷性（waterfall，agile）

![]({{site.baseurl}}/images/20230209/pic20230209173923.png)



<br/><br/><br/><br/><br/>
## 参考资料

gitflow 是什么，有哪些优缺点 <https://blog.csdn.net/weixin_46674610/article/details/115396404>

Git 最佳实践(Gitflow) <https://zhuanlan.zhihu.com/p/349805087>
