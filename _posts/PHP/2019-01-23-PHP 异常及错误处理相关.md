---
layout: post
categories: PHP
title: PHP 异常及错误处理相关
meta: 下面介绍下PHP中关于异常及错误处理相关的内容
---
* content
{:toc}

### 正文

在项目开发中，一直没留意过错误处理这一块的内容，现在因为开发需要，
翻阅了下PHP中关于异常及错误处理相关的内容，手边使用的框架是Yii2，就用Yii2说明一下。

我们可以追溯一下Yii2关于错误处理的类，最后会发现在yii\base\ErrorHandler.php中有：

```
public function register()
{
    ini_set('display_errors', false);
    set_exception_handler([$this, 'handleException']);
    if (defined('HHVM_VERSION')) {
        set_error_handler([$this, 'handleHhvmError']);
    } else {
        set_error_handler([$this, 'handleError']);
    }
    if ($this->memoryReserveSize > 0) {
        $this->_memoryReserve = str_repeat('x', $this->memoryReserveSize);
    }
    register_shutdown_function([$this, 'handleFatalError']);
}

public function unregister()
{
    restore_error_handler();
    restore_exception_handler();
}
```

这里把PHP关于异常错误的函数基本都写出来了：

ini_set('display_errors', false);  // 页面不显示错误

可以用error_reporting()设置哪些类型的错误被纪录。

set_exception_handler()  // 设置用户自定义的异常处理函数 

set_error_handler()  // 设置用户自定义的错误处理函数
 
register_shutdown_function()  // 设置用户自定义的PHP程序执行完成后（包括致命错误导致的程序执行完成）执行的函数

restore_exception_handle()  // 恢复之前定义过的异常处理函数

restore_error_handler()  // 还原之前的错误处理函数

<br/><br/><br/><br/><br/>
### 参考资料

ini_set <http://www.php.net/manual/en/function.ini-set.php>

error_reporting <http://www.php.net/manual/en/function.error-reporting.php>

set_exception_handler <http://php.net/manual/zh/function.set-exception-handler.php>

set_error_handler <http://php.net/manual/zh/function.set-error-handler.php>

register_shutdown_function <http://www.php.net/manual/en/function.register-shutdown-function.php>

restore_exception_handle <http://php.net/manual/zh/function.restore-exception-handler.php>

restore_error_handler <http://php.net/manual/zh/function.restore-error-handler.php>

错误处理 函数 <http://php.net/manual/zh/ref.errorfunc.php>

PHP常见概念混淆（八）之错误与异常 <https://www.cnblogs.com/qiye5757/p/9530919.html>

