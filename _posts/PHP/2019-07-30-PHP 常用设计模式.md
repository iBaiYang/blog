---
layout: post
categories: PHP
title: PHP 常用设计模式
meta: PHP 常用设计模式
---
* content
{:toc}

### 正文

设计模式（Design pattern）是什么：设计模式是一套被反复使用、多数人知晓、经过分类编目的代码设计的经验总结。
使用设计模式是为了可重用代码、让代码更容易被他人理解、保证代码可靠性。

为什么会有设计模式：在软件开发过程中，一个功能的实现方式多种多样，不同方法的可扩展性、可维护性以及复用性都是不一样的。
随着一个人对自己项目代码的要求增加，他会逐渐思考和实践出自己的一套方法或者思想，这种方法或思想决定了他设计出的架构或者编写出的代码的质量优劣。
设计模式就属于这样一种经验的积累，是由大量优秀的工程师或者架构师总结和提炼的精华，学习好设计模式等于让我们站在了巨人的肩膀上，
从一个高的起点出发，可以避免走很多弯路。

**设计模式的分类**

一般情况下，我们把设计模式分成了三大类：

**创建型模式（Creational patterns）**

在软件工程中，创建型设计模式用于处理对象的实例化。

创建型模式是为了解决创建对象时候遇到的问题。因为基本的对象创建方式可能会导致设计上的问题，或增加设计的复杂度，
创建型设计模式有两个主导思想：一是将系统使用的具体类封装起来，二是隐藏这些具体类的实例创建和结合方式。

* 简单工厂模式（Simple Factory） 
* 静态工厂模式（Static Factory）
* 工厂方法模式（Factory method）
* 抽象工厂模式（Abstract factory）
* 建造者模式（Builder）
* 单例模式（Singleton）
* 多例模式（Multiton）
* 原型模式（Prototype）
* 对象池模式（Pool）

GOF在《设计模式》一书中将工厂模式分为两类：工厂方法模式（Factory Method）与抽象工厂模式（Abstract Factory）。
将简单工厂模式（Simple Factory）看为工厂方法模式的一种特例，两者归为一类。

[创建型模式解说地址](https://ibaiyang.github.io/blog/php/2019/07/30/PHP-%E5%88%9B%E5%BB%BA%E5%9E%8B%E6%A8%A1%E5%BC%8F.html)

**结构型模式（Structural pattern）**

结构型设计模式用于处理类和对象的组合。

结构型模式是通过定义一个简单方法来实现和了解实体间关系，从而简化设计。

* 适配器模式（Adapter）
* 桥梁模式（Bridge）
* 组合模式（Composite）
* 数据映射模式（Data Mapper）
* 装饰模式（Decorator）
* 依赖注入模式（Dependency Injection）
* 门面模式（Facade）
* 流接口模式（Fluent Interface）
* 代理模式（Proxy）
* 注册模式（Registry）
* 享元模式（Flyweight）

[结构型模式解说地址]()

**行为型模式（Behavioral pattern）**

行为型设计模式用于处理类的对象间通信。

行为型模式是用来识别对象之间的常用交流模式并加以实现，使得交流变得更加灵活。

* 责任链模式（Chain Of Responsibilities）
* 命令行模式（Command）
* 迭代器模式（Iterator）
* 中介者模式（Mediator）
* 备忘录模式（Memento）
* 空对象模式（Null Object）
* 观察者模式（Observer）
* 规格模式（Specification）
* 状态模式（State）
* 策略模式（Strategy）
* 模板方法模式（Template Method）
* 访问者模式（Visitor）
* 解释器模式（Interpreter）

[行为型模式解说地址]()

**其它**

* 委托模式（Delegation）
* 资源库模式（Repository）
* 服务定位器模式（Service Locator）
* 事件模式（Event）
* 行为模式（Behavior）

**各个设计模式之间的关系**

![]({{site.baseurl}}/images/20190813/20190813142514.png)

#### 委托模式（Delegation）

* 模式定义

* UML类图

* 示例代码

* 测试代码

#### 资源库模式（Repository）

* 模式定义

* UML类图

* 示例代码

* 测试代码

#### 服务定位器模式(Service Locator)

**服务定位器（Service Locator）**

Service Locator是IoC的另一种实现方式， 其核心是把所有可能用到的依赖单元交由Service Locator进行实例化和创建、配置， 
把类对依赖单元的依赖，转换成类对Service Locator的依赖。 DI 与 Service Locator并不冲突，两者可以结合使用。 
目前，Yii2.0把这DI和Service Locator这两个东西结合起来使用，或者说通过DI容器，实现了Service Locator。

具体实例，可以看一下 [深入理解Yii2.0 服务定位器](https://ibaiyang.github.io/blog/yii2/2019/06/29/%E6%B7%B1%E5%85%A5%E7%90%86%E8%A7%A3Yii2.0-%E6%9C%8D%E5%8A%A1%E5%AE%9A%E4%BD%8D%E5%99%A8.html) 。

#### 事件模式（Event）

使用事件，可以在特定的时点，触发执行预先设定的一段代码，事件既是代码解耦的一种方式，也是设计业务流程的一种模式。

具体实例，可以看一下 [深入理解Yii2.0 事件](https://ibaiyang.github.io/blog/yii2/2019/06/20/%E6%B7%B1%E5%85%A5%E7%90%86%E8%A7%A3Yii2.0-%E4%BA%8B%E4%BB%B6.html) 。

#### 行为模式（Behavior）

使用行为（behavior）可以在不修改现有类的情况下，对类的功能进行扩充。 通过将行为绑定到一个类，可以使类具有行为本身所定义的属性和方法， 
就好像类本来就有这些属性和方法一样。 而且不需要写一个新的类去继承或包含现有类。

具体实例，可以看一下 [深入理解Yii2.0 行为](https://ibaiyang.github.io/blog/yii2/2019/06/21/%E6%B7%B1%E5%85%A5%E7%90%86%E8%A7%A3Yii2.0-%E8%A1%8C%E4%B8%BA.html) 。

<br/><br/><br/><br/><br/>

### 参考资料

常见软件架构模式 <https://ibaiyang.github.io/blog/php/2019/07/30/%E5%B8%B8%E8%A7%81%E8%BD%AF%E4%BB%B6%E6%9E%B6%E6%9E%84%E6%A8%A1%E5%BC%8F.html>

DesignPatternsPHP <https://github.com/domnikl/DesignPatternsPHP>

PHP 设计模式系列 <https://laravelacademy.org/books/php-design-pattern>

PHP 设计模式(Design Pattern For PHP) <https://www.cnblogs.com/wilburxu/category/910011.html> 

php-the-right-way 设计模式 <http://laravel-china.github.io/php-the-right-way/pages/Design-Patterns.html>

DesignPatternsPHP <https://designpatternsphp.readthedocs.io/en/latest/>

DesignPatternsPHP(PHP设计模式范例) <https://designpatternsphp.readthedocs.io/zh_CN/latest/README.html>

PHP 设计模式概述 <https://segmentfault.com/a/1190000016629282>

PHP设计模式（一）简单工厂模式 （Simple Factory For PHP） <https://segmentfault.com/a/1190000016635395>

PHP设计模式（二）工厂方法模式（Factory Method） <https://segmentfault.com/a/1190000016646401>

PHP设计模式（三）抽象工厂模式（Abstract Factory） <https://segmentfault.com/a/1190000016659904>

PHP设计模式（四）单例模式（Singleton） <https://segmentfault.com/a/1190000016670292>

PHP设计模式（五）建造者模式（Builder For PHP） <https://www.cnblogs.com/wilburxu/p/6179363.html>

PHP设计模式（六）原型模式（Prototype For PHP） <https://www.cnblogs.com/wilburxu/p/6188437.html>

PHP设计模式（七）适配器模式（Adapter For PHP） <https://www.cnblogs.com/wilburxu/p/6200570.html>

PHP设计模式（八）桥接模式（Bridge For PHP） <https://www.cnblogs.com/wilburxu/p/6202097.html>

PHP八大设计模式 <https://blog.csdn.net/flitrue/article/details/52614599>

php各种设计模式简单实践思考 <https://www.cnblogs.com/aksir/p/6777595.html>

工厂方法模式（Factory Method） <https://learnku.com/docs/php-design-patterns/2018/FactoryMethod/1489>

抽象工厂模式（Abstract Factory） <https://www.jianshu.com/p/7deb64f902db>

PHP设计模式-单例模式 <https://www.cnblogs.com/yangjinjin/archive/2013/01/31/2887492.html>

PHP中“简单工厂模式”实例讲解 <https://www.cnblogs.com/hongfei/archive/2012/07/07/2580776.html>

PHP设计模式之迭代器模式 <https://blog.csdn.net/bujidexinq/article/details/104956869>

