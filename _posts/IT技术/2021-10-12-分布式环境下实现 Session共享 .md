---
layout: post
categories: IT技术
title: 分布式环境下实现 Session共享
meta: 分布式环境下，如何实现 Session共享 
---
* content
{:toc}
  
## 正文

先了解一下为什么会出现这种session共享的解决方案？

随着互联网公司的项目在微服务和分布式的环境下进行的搭建，导致一个项目可能分别部署在几个甚至很多的服务器集群下，此时就会出现一个问题

当用户进行一个session会话的时候，比如一个用户去登录项目，一般的大公司的项目都是有Nginx进行反向代理的，
但是这里简单列举一下Nginx常用的几种反向代理策略：
1.轮询策略，2. 权重比例策略，3. ip_hash策略，4. 还可以自定义的策略，
在Nginx的反向代理下，一般会把用户的请求分发到不同的服务器上，但是如果用户请求的请求是存放在该请求的服务器A上，
那么该用户的sessionID就存储在该服务器上JVM的一个ConcurrentHashmap中，以sessionID为key。

但是如果此时用户请求的一个服务模块可能需要调用到服务器B，当用户发起请求的时候，
此时的服务器B上并没有存储该用户的sessionID，所以就会再次让用户进行一个登陆操作。
还有可能会导致用户本来就想完成一个下单操作，但是却还登陆了好几次的情况。

所以session共享方案在分布式环境和微服务系统下，显得尤其重要。

待继续。。。

## 参考资料

如何实现session共享的几种解决方案？ <https://blog.csdn.net/qq_36520235/article/details/87830929>

分布式环境下，如何实现 Session共享 <https://mp.weixin.qq.com/s?__biz=MzIzNjM3MDEyMg==&mid=2247520410&idx=2&sn=d2d693d9fe0e66b64b02393dd62d1ce7>






