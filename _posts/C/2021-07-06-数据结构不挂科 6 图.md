---
layout: post
categories: C
title: 数据结构不挂科 6 图
meta: 数据结构不挂科 6 图
---
* content
{:toc}

## 正文

### 图的基本概念

#### 定义

图由结点的有穷组合V和边的集合E组成，记为`G=(V, E)`。

图不可以是空图

#### 基本概念和术语

有向图：每条边都有⽅向

⽆向图：每条边都没有⽅向

有向完全图：在有向图中有n个顶点，将具有n(n-1)条边的有向图称为有向完全图。 图中任意两个顶点都有两条边相连。

⽆向完全图：在⽆向图中有n个顶点，将具有n(n-1)/2条边的⽆向图称为⽆向完全图。图中任意两个顶点都有⼀条边相连。

连通：在⽆向图中，若从顶点v到顶点w有路径存在，则称v和w是连通的。

连通图：若图G中任意两个顶点都是连通的，则称图G为连通图，否则称为⾮连通图。

连通分量：⽆向图中的极⼤连通⼦图称为连通分量。

强连通：在有向图中，若从顶点v到顶点w和从顶点w到顶点v之间都有路径，则称这两个顶点是强连通的。

强连通图：若图中任何⼀对顶点都是强连通的，则称此图为强连通图。

强连通分量：有向图中的极⼤连通⼦图称为有向图的强连通分量。

弧：在有向图中，通常将边称为弧，含箭头的⼀端称为弧头，另⼀端称为弧尾`<vi, vj>`表示从顶点vi到顶点vj有⼀条边。

顶点的度：以该顶点为⼀个端点的边的数⽬。

顶点的⼊度：在有向图中，⼊度是以顶点v为终点的有向边的数⽬。

顶点的出度：在有向图中，出度是以顶点v为起点的有向边的数⽬。

有向图的全部顶点的⼊度之和与出度之和相等，并且等于边数。

路径：顶点vp到顶点vq之间的⼀条路径是指顶点序列vp，vi1，vi2，...，vim，vq。

路径⻓度：路径上边的数⽬称为路径的⻓度。

回路：第⼀个顶点和最后⼀个顶点相同的路径称为回路或环。

如果⼀个图有n个顶点，并且有⼤于n-1条边，则此图⼀定有环。

简单路径：在路径序列中，顶点不重复出现的路径称为简单路径。

简单回路：除第⼀个顶点和最后⼀个顶点之外，其余顶点不重复出现的回路称为简单回路。

边的权：在⼀个图中，每条边都可以标上具有某种含义的数值，该数值称为该边的权值。

⽹：边上带有权值的图称为带权图，也称作⽹。

* 例题6-1  ⼀个有n个顶点和n条边的⽆向图⼀定是（ ）。

A．连通的   B．不连通的   C．⽆环的   D．有环的

* 例题6-2  若从⽆向图的任意顶点出发进⾏⼀次深度优先搜索即可访问所有顶点，则该图⼀定是（ ）。

A．强连通路   B．连通路   C．有回路   D．⼀棵树

#### 图结构的存储

**邻接矩阵法**

⽤⼀个⼀维数组存储图中顶点的信息，⽤⼀个⼆维数组存储图中边的信息，存储顶点之间邻接关系的⼆维数组称为邻接矩阵。

设G=(V，E)是具有n个顶点的图，顶点序号依次为0，1，...，n-1，则G的邻接矩阵是具有如下定义的m阶⽅阵A：

    A[i][j]=1 表示顶点i与顶点j邻接，即i与j之间存在边或者弧。
    A[i][j]=0 表示顶点i与顶点j不邻接（0<=i, j<=n-1）。

邻接矩阵的结构体定义

```
#define MAXVEX 100  // 最大定点数，应用用户定义
#define INFINITY 65535  // 表示权值的无穷

typedef int EdgeType;  // 边上的权值类型，应由用户定义
typedef char VertexType;  // 定点类型，应由用户定义

typedef struct{
    VertexType vexs[MAXVEX];  // 定点表
    EdgeType arc[MAXVEX][MAXVEX];  // 邻接矩阵，可看做边表
    int numNodes, numEdges;  // 图中当前的定点数和边数
} MGraph;
```

**邻接表法**

对图中的每个顶点i建⽴⼀个单链表，每个单链表的第⼀个结点存放有关顶点的信息，把这⼀结点看作链表的表头，其余结点存放有关边的信息。

邻接表由单链表的表头形成的顶点表和单链表其余结点形成的边表两部分组成。

⼀般顶点表存放顶点信息和指向第⼀个边结点指针，边表存放与当前顶点相邻接顶点的序号和指向下⼀个边结点的指针。

### 图的遍历

#### 深度优先搜索遍历

**深度优先搜索遍历DFS的基本思想**

深度优先搜索遍历（DFS）类似于⼆叉树的先序遍历。

1. 访问出发点v，并将其标记为已访问过
2. 选取与v邻接的未被访问的任意⼀个顶点w，并访问它
3. 选取与w邻接的未被访问的任⼀顶点并访问，以此重复进⾏

当⼀个顶点所有的邻接顶点都被访问过时，则依次退回到最近被访问过的顶点

若该顶点还有其他邻接顶点未被访问，则从这些未被访问的顶点中取⼀个并重复上述访问过程，直⾄图中所有顶点都被访问过为⽌

**深度优先搜索遍历**

![]({{site.baseurl}}/images/20210729/20210729125245.png)

访问指定的起始顶点；若当前访问的顶点的邻接顶点有未被访问的，则任选⼀个访问之；

反之，退回到最近访问过的顶点；直到与起始顶点相通的全部顶点都访问完毕；

回退到1，发现了新的没有被访问的结点

继续回退，回退到0

再也找不到新的结点了，那么回退，回退到起始顶点，结束搜索

**深度优先搜索遍历DFS的性能分析**

是⼀个递归算法，需要借助⼀个递归⼯作栈，时间复杂度为`O(|V|)`。

以**邻接矩阵**表示时，查找每个顶点的邻接点所需时间为`O(|V|)`，总的时间复杂度为`O(|V|^2)`。

以**邻接表**表示时，查找所有顶点的邻接点所需时间为`O(|E|)`，访问顶点所需时间为`O(|V|)`,总的时间复杂度为`O(|V|+|E|)`。

**深度优先搜索树**

把图的深度优先搜索遍历过程中所经历的边保留，其余的边删掉，形成的树称为深度优先搜索⽣成树。

#### ⼴度优先搜索遍历

**广度优先搜索遍历BFS的基本思想**

图的⼴度优先搜索遍历（BFS）类似于树的层次遍历。
1. 访问起始点v
2. 选取与v邻接的全部顶点w1，w2，...，wn进⾏访问
3. 再依次访问与w1，w2，...，wn邻接的全部顶点（已经访问过的除外），依此类推，直到所有顶点都被访问过

**广度优先搜索遍历BFS的算法过程**

⽅法：从图的某⼀结点出发，⾸先依次访问该结点的所有邻接顶点 Vi1, Vi2, …, Vin 
再按这些顶点被访问的先后次序依次访问与它们相邻接的所有未被访问的顶点，重复此过程，直⾄所有顶点均被访问为⽌。

![]({{site.baseurl}}/images/20210729/20210729125850.png)

0 1 2 3 4 5 6

**广度优先搜索遍历BFS的性能分析**

BFS邻接表和邻接矩阵的存储⽅式都需要借助⼀个辅助队列Q，n个顶点均需⼊队⼀次，最坏的情况下空间复杂度为`O(|V|)`。

采⽤**邻接表**存储⽅式时，每个顶点均需搜索⼀次，时间复杂度为`O(|V|)`。

在搜索任⼀顶点时，每条边⾄少访问⼀次，时间复杂度为`O(|E|)`。

总时间复杂度为`O(|V|)+|E|)`。

采⽤**邻接矩阵**存储⽅式时，查找每个顶点所需时间为`O(|V|)`，总时间复杂度为`O(|V|^2)`。

**广度优先搜索树**

⼀给定的邻接矩阵存储表示是唯⼀的，故其⼴度优先⽣成树也是唯⼀的。

但邻接表存储表示不唯⼀，故其⼴度优先⽣成树不唯⼀。

* 例题6-3 下列关于⼴度优先算法点说法中，正确的是（ ）。（多选）

A．当各边的权值相等时，⼴度优先算法可以解决单源最短路径问题

B．当各边的权值不等时，⼴度优先算法可⽤来解决单源最短路径问题

C．⼴度优先遍历算法类似于树中的后序遍历算法

D．实现图的⼴度优先算法时，使⽤的数据结构是队列

* 例题6-4  对⼀个有n个顶点、e条边的图采⽤邻接表表示时，进⾏DFS遍历的时间复杂度为（ ），空间复杂度为（ ）；
进⾏BFS遍历的时间复杂度为（ ），空间复杂度（ ）。

A．O（n）   B．O（e）   C．O（n+e）   D．O（1）

### 图的基本应⽤

#### 最⼩⽣成树


#### 最短路径




#### 拓扑排序与关键路径



### 例题解析

* 解析6-1 D

若⼀个⽆向图有n个顶点和n-1条边，可以使它连通但没有环（即⽣成树），但再加⼀条边，在不考虑重边的情形下，则必然会构成环。

* 解析6-2 B

A.强连通路为有向图，与题意⽭盾。

B.对⽆向连通图做⼀次深度优先搜索，可以访问到该连通图的所有顶点。

C.有回路的⽆向图不⼀定是连通路，因为回路不⼀定包含图的所有结点。

D.连通图可能是树，也可能存在环。

* 解析6-3 A、D

A、B.⼴度优先搜索以起始结点为中⼼，⼀层⼀层地向外层扩展遍历图的顶点，因此⽆法考虑到边的权值，只适合求边权值相等的图的单源最短路径。

C.⼴度优先搜索相当于树的层序遍历。

D.⼴度优先搜索需要⽤到队列，深度优先搜索需要⽤到栈。

* 解析6-4 C、A、C、A

深度优先遍历时，每个顶点表结点和每个边表结点均查询⼀次，每个顶点递归调⽤⼀次，需要借助⼀个递归⼯作栈；
⽽⼴度优先遍历时，也是每个顶点表结点和每个边表结点均查找⼀次，每个顶点进⼊队列⼀次。

<br/><br/><br/><br/><br/>
## 参考资料


