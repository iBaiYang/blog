---
layout: post
categories: Linux
title: 兄弟连Linux教程(李明,沈超) 第13章 Linux系统管理
meta: 兄弟连Linux教程(李明,沈超) 第13章 Linux系统管理
---
* content
{:toc}

## 正文

### 13.1 进程管理

#### 13.1.1  进程查看

1、进程简介

进程是正在执行的一个程序或命令，每一个进程都是一个运行的实体，都有自己的地址空间，并占用一定的系统资源。

2、进程管理的作用

* 判断服务器健康状态
* 查看系统中所有进程
* 杀死进程

3、查看系统中所有进程

```
[root@localhost ~]# ps aux
#查看系统中所有进程，使用BSD操作系统格式
[root@localhost ~]# ps -le
#查看系统中所有进程，使用Linux标准命令格式。
```

```
USER：该进程是由哪个用户产生的；
PID：进程的ID号；
%CPU：该进程占用CPU资源的百分比，占用越高，进程越耗费资源；
%MEM：该进程占用物理内存的百分比，占用越高，进程越耗费资源；
VSZ：该进程占用虚拟内存的大小，单位KB；
RSS：该进程占用实际物理内存的大小，单位KB；
TTY：该进程是在哪个终端中运行的。其中tty1-tty7代表本地控制台终端，tty1-tty6是本地的字符界面终端，tty7是图形终端。pts/0-255代表虚拟终端。
STAT：进程状态。常见的状态有：R：运行、S：睡眠、T：停止状态、s：包含子进程、+：位于后台
START：该进程的启动时间
TIME：该进程占用CPU的运算时间，注意不是系统时间
COMMAND：产生此进程的命令名
```

4、查看系统健康状态

```
[root@localhost ~]# top [选项]
选项：
    -d 秒数：    指定top命令每隔几秒更新。默认是3秒
    
在top命令的交互模式当中可以执行的命令：
    ？或h：        显示交互模式的帮助
    P：            以CPU使用率排序，默认就是此项
    M：            以内存的使用率排序
    N：            以PID排序
    q：            退出top
```

第一行信息为任务队列信息

```
内容    说明
12:26:46    系统当前时间
up 1 day, 13:32    系统的运行时间，本机已经运行1天13小时32分钟
2 users    当前登录了两个用户
load average: 0.00, 0.00, 0.00    系统在之前1分钟，5分钟，15分钟的平均负载。一般认为小于1时，负载较小。如果大于1，系统已经超出负荷。
```

第二行为进程信息

```
内容    说明
Tasks:  95 total    系统中的进程总数
1 running    正在运行的进程数
94 sleeping    睡眠的进程
0 stopped    正在停止的进程
0 zombie    僵尸进程。如果不是0，需要手工检查僵尸进程
```

第三行为CPU信息

```
内容    说明
Cpu(s):  0.1%us    用户模式占用的CPU百分比
0.1%sy    系统模式占用的CPU百分比
0.0%ni    改变过优先级的用户进程占用的CPU百分比
99.7%id    空闲CPU的CPU百分比
0.1%wa    等待输入/输出的进程的占用CPU百分比
0.0%hi    硬中断请求服务占用的CPU百分比
0.1%si    软中断请求服务占用的CPU百分比
0.0%st    st（Steal time）虚拟时间百分比。就是当有虚拟机时，虚拟CPU等待实际CPU的时间百分比。
```

第四行为物理内存信息

```
内容    说明
Mem:    625344k total    物理内存的总量，单位KB
571504k used    已经使用的物理内存数量
53840k free    空闲的物理内存数量，我们使用的是虚拟机，总共只分配了628MB内存，所以只有53MB的空闲内存了
65800k buffers    作为缓冲的内存数量
```

第五行为交换分区（swap）信息

```
内容    说明
Swap:   524280k total    交换分区（虚拟内存）的总大小
0k used    已经使用的交互分区的大小
524280k free    空闲交换分区的大小
409280k cached    作为缓存的交互分区的大小
```

5、查看进程树

```
[root@localhost ~]# pstree [选项]
选项：
    -p：    显示进程的PID
    -u：    显示进程的所属用户
```

#### 13.1.2  进程管理

1、kill命令

```
[root@localhost ~]# kill –l
#查看可用的进程信号
```

```
信号代号    信号名称    说明
1    SIGHUP    该信号让进程立即关闭，然后重新读取配置文件之后重启。
2    SIGINT    程序终止信号，用于终止前台进程。相当于输出ctrl+c快捷键。
8    SIGFPE    在发生致命的算术运算错误时发出. 不仅包括浮点运算错误, 还包括溢出及除数为0等其它所有的算术的错误。
9    SIGKILL    用来立即结束程序的运行. 本信号不能被阻塞、处理和忽略。一般用于强制终止进程。
14    SIGALRM    时钟定时信号, 计算的是实际的时间或时钟时间. alarm函数使用该信号。
15    SIGTERM    正常结束进程的信号，kill命令的默认信号。有时如果进程已经发生问题，这个信号是无法正常终止进程的，我们才会尝试SIGKILL信号，也就是信号9。
18    SIGCONT    该信号可以让暂停的进程恢复执行，本信号不能被阻断。
19    SIGSTOP    该信号可以暂停前台进程，相当于输入ctrl+z快捷键。本信号不能被阻断。
```

```
[root@localhost ~]# kill -1 22354
#重启进程

[root@localhost ~]# kill -9 22368
#强制杀死进程
```

2、killall命令

```
[root@localhost ~]# killall [选项][信号] 进程名
#按照进程名杀死进程
选项：
    -i：    交互式，询问是否要杀死某个进程
    -I：    忽略进程名的大小写
```

3、pkill命令

```
[root@localhost ~]# pkill [选项] [信号] 进程名
#按照进程名终止进程
选项：
    -t 终端号：    按照终端号踢出用户
```

按照终端号踢出用户

```
[root@localhost ~]# w
#使用w命令查询本机已经登录的用户

[root@localhost ~]# pkill -t -9 pts/1
#强制杀死从pts/1虚拟终端登录的进程
```

### 13.2 工作管理

1、把进程放入后台

```
tar -zcf etc.tar.gz /etc &

[root@localhost ~]# top
#在top命令执行的过程中，按下ctrl+z快捷键
```

2、查看后台的工作

```
[root@localhost ~]# jobs [-l]
选项：
	-l：	显示工作的PID

注：“+”号代表最近一个放入后台的工作，也是工作恢复时，默认恢复的工作。“-”号代表倒数第二个放入后台的工作
```

3、将后台暂停的工作恢复到前台执行

```
[root@localhost ~]# fg %工作号
参数：
	%工作号：	%号可以省略，但是注意工作号			和PID的区别
```

4、把后台暂停的工作恢复到后台执行

```
[root@localhost ~]# bg %工作号

注：后台恢复执行的命令，是不能和前台有交互的，否则不能恢复到后台执行
```


### 13.3 系统资源查看


### 13.4 系统定时任务



<br/><br/><br/><br/><br/>
## 参考资料




