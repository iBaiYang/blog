---
layout: post
categories: Linux
title: 兄弟连Linux教程(李明,沈超) 第13章 Linux系统管理
meta: 兄弟连Linux教程(李明,沈超) 第13章 Linux系统管理
---
* content
{:toc}

## 正文

### 13.1 进程管理

#### 13.1.1  进程查看

1、进程简介

进程是正在执行的一个程序或命令，每一个进程都是一个运行的实体，都有自己的地址空间，并占用一定的系统资源。

2、进程管理的作用

* 判断服务器健康状态
* 查看系统中所有进程
* 杀死进程

3、查看系统中所有进程

```
[root@localhost ~]# ps aux
#查看系统中所有进程，使用BSD操作系统格式
[root@localhost ~]# ps -le
#查看系统中所有进程，使用Linux标准命令格式。
```

```
USER：该进程是由哪个用户产生的；
PID：进程的ID号；
%CPU：该进程占用CPU资源的百分比，占用越高，进程越耗费资源；
%MEM：该进程占用物理内存的百分比，占用越高，进程越耗费资源；
VSZ：该进程占用虚拟内存的大小，单位KB；
RSS：该进程占用实际物理内存的大小，单位KB；
TTY：该进程是在哪个终端中运行的。其中tty1-tty7代表本地控制台终端，tty1-tty6是本地的字符界面终端，tty7是图形终端。pts/0-255代表虚拟终端。
STAT：进程状态。常见的状态有：R：运行、S：睡眠、T：停止状态、s：包含子进程、+：位于后台
START：该进程的启动时间
TIME：该进程占用CPU的运算时间，注意不是系统时间
COMMAND：产生此进程的命令名
```

```
[root@localhost vagrant]# ps aux
USER       PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
root         1  0.1  0.0  19232  1488 ?        Ss   07:44   0:00 /sbin/init
root         2  0.0  0.0      0     0 ?        S    07:44   0:00 [kthreadd]
root         3  0.1  0.0      0     0 ?        S    07:44   0:00 [migration/0]
root         4  0.0  0.0      0     0 ?        S    07:44   0:00 [ksoftirqd/0]
root         5  0.0  0.0      0     0 ?        S    07:44   0:00 [stopper/0]
root         6  0.0  0.0      0     0 ?        S    07:44   0:00 [watchdog/0]
root         7  0.0  0.0      0     0 ?        S    07:44   0:00 [migration/1]
root         8  0.0  0.0      0     0 ?        S    07:44   0:00 [stopper/1]
root         9  0.0  0.0      0     0 ?        S    07:44   0:00 [ksoftirqd/1]
root        10  0.0  0.0      0     0 ?        S    07:44   0:00 [watchdog/1]
root        11  0.0  0.0      0     0 ?        S    07:44   0:00 [events/0]
root        12  0.0  0.0      0     0 ?        S    07:44   0:00 [events/1]
root        13  0.0  0.0      0     0 ?        S    07:44   0:00 [events/0]
root        14  0.0  0.0      0     0 ?        S    07:44   0:00 [events/1]
root        15  0.0  0.0      0     0 ?        S    07:44   0:00 [events_long/0]
root        16  0.0  0.0      0     0 ?        S    07:44   0:00 [events_long/1]
root        17  0.0  0.0      0     0 ?        S    07:44   0:00 [events_power_ef]
root        18  0.0  0.0      0     0 ?        S    07:44   0:00 [events_power_ef]
root        19  0.0  0.0      0     0 ?        S    07:44   0:00 [cgroup]
root        20  0.0  0.0      0     0 ?        S    07:44   0:00 [khelper]
root        21  0.0  0.0      0     0 ?        S    07:44   0:00 [netns]
root        22  0.0  0.0      0     0 ?        S    07:44   0:00 [async/mgr]
root        23  0.0  0.0      0     0 ?        S    07:44   0:00 [pm]
root        24  0.0  0.0      0     0 ?        S    07:44   0:00 [sync_supers]
root        25  0.0  0.0      0     0 ?        S    07:44   0:00 [bdi-default]
root        26  0.0  0.0      0     0 ?        S    07:44   0:00 [kintegrityd/0]
root        27  0.0  0.0      0     0 ?        S    07:44   0:00 [kintegrityd/1]
root        28  0.0  0.0      0     0 ?        S    07:44   0:00 [kblockd/0]
root        29  0.0  0.0      0     0 ?        S    07:44   0:00 [kblockd/1]
root        30  0.0  0.0      0     0 ?        S    07:44   0:00 [kacpid]
root        31  0.0  0.0      0     0 ?        S    07:44   0:00 [kacpi_notify]
root        32  0.0  0.0      0     0 ?        S    07:44   0:00 [kacpi_hotplug]
root        33  0.0  0.0      0     0 ?        S    07:44   0:00 [ata_aux]
root        34  0.0  0.0      0     0 ?        S    07:44   0:00 [ata_sff/0]
root        35  0.0  0.0      0     0 ?        S    07:44   0:00 [ata_sff/1]
root        36  0.0  0.0      0     0 ?        S    07:44   0:00 [ksuspend_usbd]
root        37  0.0  0.0      0     0 ?        S    07:44   0:00 [khubd]
root        38  0.0  0.0      0     0 ?        S    07:44   0:00 [kseriod]
root        39  0.0  0.0      0     0 ?        S    07:44   0:00 [md/0]
root        40  0.0  0.0      0     0 ?        S    07:44   0:00 [md/1]
root        41  0.0  0.0      0     0 ?        S    07:44   0:00 [md_misc/0]
root        42  0.0  0.0      0     0 ?        S    07:44   0:00 [md_misc/1]
root        43  0.0  0.0      0     0 ?        S    07:44   0:00 [linkwatch]
root        44  0.0  0.0      0     0 ?        S    07:44   0:00 [khungtaskd]
root        45  0.0  0.0      0     0 ?        S    07:44   0:00 [kswapd0]
root        46  0.0  0.0      0     0 ?        SN   07:44   0:00 [ksmd]
root        47  0.0  0.0      0     0 ?        SN   07:44   0:00 [khugepaged]
root        48  0.0  0.0      0     0 ?        S    07:44   0:00 [aio/0]
root        49  0.0  0.0      0     0 ?        S    07:44   0:00 [aio/1]
root        50  0.0  0.0      0     0 ?        S    07:44   0:00 [crypto/0]
root        51  0.0  0.0      0     0 ?        S    07:44   0:00 [crypto/1]
root        58  0.0  0.0      0     0 ?        S    07:44   0:00 [kthrotld/0]
root        59  0.0  0.0      0     0 ?        S    07:44   0:00 [kthrotld/1]
root        61  0.0  0.0      0     0 ?        S    07:44   0:00 [kpsmoused]
root        62  0.0  0.0      0     0 ?        S    07:44   0:00 [usbhid_resumer]
root        63  0.0  0.0      0     0 ?        S    07:44   0:00 [deferwq]
root        96  0.0  0.0      0     0 ?        S    07:44   0:00 [kdmremove]
root        97  0.0  0.0      0     0 ?        S    07:44   0:00 [kstriped]
root       206  0.0  0.0      0     0 ?        S    07:44   0:00 [scsi_eh_0]
root       225  0.0  0.0      0     0 ?        S    07:44   0:00 [scsi_eh_1]
root       226  0.0  0.0      0     0 ?        S    07:44   0:00 [scsi_eh_2]
root       289  0.0  0.0      0     0 ?        S    07:44   0:00 [kdmflush]
root       291  0.0  0.0      0     0 ?        S    07:44   0:00 [kdmflush]
root       309  0.0  0.0      0     0 ?        S    07:44   0:00 [jbd2/dm-0-8]
root       310  0.0  0.0      0     0 ?        S    07:44   0:00 [ext4-dio-unwrit]
root       391  0.0  0.0  10796   904 ?        S<s  07:44   0:00 /sbin/udevd -d
root       452  0.0  0.0      0     0 ?        S    07:44   0:00 [iprt/0]
root       453  0.0  0.0      0     0 ?        S    07:44   0:00 [iprt/1]
root       700  0.0  0.0      0     0 ?        S    07:44   0:00 [jbd2/sda1-8]
root       701  0.0  0.0      0     0 ?        S    07:44   0:00 [ext4-dio-unwrit]
root       733  0.0  0.0      0     0 ?        S    07:44   0:00 [kauditd]
root       809  0.0  0.0      0     0 ?        S    07:44   0:00 [flush-253:0]
root       966  0.0  0.0   9120   688 ?        Ss   07:45   0:00 /sbin/dhclient -1 -q -cf /etc/dhcp/dhclient-eth0.conf -lf /var/lib/dhclient/dhclient-eth0.leases -pf /var/run/dhclient-eth0.
root      1026  0.0  0.0  27596   796 ?        S<sl 07:45   0:00 auditd
root      1048  0.0  0.0 249088  1584 ?        Sl   07:45   0:00 /sbin/rsyslogd -i /var/run/syslogd.pid -c 5
root      1160  0.0  0.0 335484  1272 ?        Sl   07:45   0:00 /usr/sbin/VBoxService
root      1184  0.0  0.0  66232  1232 ?        Ss   07:45   0:00 /usr/sbin/sshd
root      1217  0.0  0.0 108300  1616 ?        S    07:45   0:00 /bin/sh /usr/bin/mysqld_safe --datadir=/var/lib/mysql --socket=/var/lib/mysql/mysql.sock --pid-file=/var/run/mysqld/mysqld.p
mysql     1421  0.5 24.0 1408836 462640 ?      Sl   07:45   0:02 /usr/sbin/mysqld --basedir=/usr --datadir=/var/lib/mysql --plugin-dir=/usr/lib64/mysql/plugin --user=mysql --log-error=/var/
root      1559  0.0  0.1  80876  3420 ?        Ss   07:45   0:00 /usr/libexec/postfix/master
postfix   1574  0.0  0.1  80956  3384 ?        S    07:45   0:00 pickup -l -t fifo -u
postfix   1575  0.0  0.1  81024  3420 ?        S    07:45   0:00 qmgr -l -t fifo -u
root      1595  0.0  0.0  47360  1080 ?        Ss   07:45   0:00 nginx: master process /usr/sbin/nginx -c /etc/nginx/nginx.conf
nginx     1596  0.0  0.0  47752  1804 ?        S    07:45   0:00 nginx: worker process
root      1608  0.0  0.0 116860  1200 ?        Ss   07:45   0:00 crond
root      1621  0.0  0.0   4064   592 tty1     Ss+  07:45   0:00 /sbin/mingetty /dev/tty1
root      1623  0.0  0.0   4064   592 tty2     Ss+  07:45   0:00 /sbin/mingetty /dev/tty2
root      1625  0.0  0.0   4064   588 tty3     Ss+  07:45   0:00 /sbin/mingetty /dev/tty3
root      1627  0.0  0.0   4064   592 tty4     Ss+  07:45   0:00 /sbin/mingetty /dev/tty4
root      1629  0.0  0.0   4064   592 tty5     Ss+  07:45   0:00 /sbin/mingetty /dev/tty5
root      1631  0.0  0.0   4064   588 tty6     Ss+  07:45   0:00 /sbin/mingetty /dev/tty6
root      2451  0.0  0.2 102656  4804 ?        Ss   07:45   0:00 sshd: vagrant [priv]
vagrant   2453  0.0  0.1 102656  1928 ?        S    07:45   0:00 sshd: vagrant@pts/0
vagrant   2454  0.0  0.0 108304  1908 pts/0    Ss   07:45   0:00 -bash
root      2474  0.0  0.1 175108  2656 pts/0    S    07:47   0:00 sudo su
root      2475  0.0  0.0 145000  1556 pts/0    S    07:47   0:00 su
root      2476  0.0  0.0 108304  1916 pts/0    S    07:47   0:00 bash
root      2494  0.0  0.0   4932   524 ?        Ss   07:47   0:00 iscsid 0:off 1:off 2:off 3:on 4:on 5:on 6:off
root      2495  0.0  0.1   5436  3384 ?        S<Ls 07:47   0:00 iscsid 0:off 1:off 2:off 3:on 4:on 5:on 6:off
root      2502  0.0  0.0      0     0 ?        S    07:47   0:00 [iscsi_eh]
root      2504  0.0  0.0  10792   832 ?        S<   07:47   0:00 /sbin/udevd -d
root      2505  0.0  0.0  10792   832 ?        S<   07:47   0:00 /sbin/udevd -d
root      2531  0.0  0.0 110232  1164 pts/0    R+   07:51   0:00 ps aux
[root@localhost vagrant]#
[root@localhost vagrant]# 
[root@localhost vagrant]#
[root@localhost vagrant]# ps -le
F S   UID   PID  PPID  C PRI  NI ADDR SZ WCHAN  TTY          TIME CMD
4 S     0     1     0  0  80   0 -  4808 poll_s ?        00:00:00 init
1 S     0     2     0  0  80   0 -     0 kthrea ?        00:00:00 kthreadd
1 S     0     3     2  0 -40   - -     0 migrat ?        00:00:00 migration/0
1 S     0     4     2  0  80   0 -     0 ksofti ?        00:00:00 ksoftirqd/0
1 S     0     5     2  0 -40   - -     0 cpu_st ?        00:00:00 stopper/0
5 S     0     6     2  0 -40   - -     0 watchd ?        00:00:00 watchdog/0
1 S     0     7     2  0 -40   - -     0 migrat ?        00:00:00 migration/1
1 S     0     8     2  0 -40   - -     0 cpu_st ?        00:00:00 stopper/1
1 S     0     9     2  0  80   0 -     0 ksofti ?        00:00:00 ksoftirqd/1
5 S     0    10     2  0 -40   - -     0 watchd ?        00:00:00 watchdog/1
1 S     0    11     2  0  80   0 -     0 worker ?        00:00:00 events/0
1 R     0    12     2  0  80   0 -     0 -      ?        00:00:02 events/1
1 S     0    13     2  0  80   0 -     0 worker ?        00:00:00 events/0
1 S     0    14     2  0  80   0 -     0 worker ?        00:00:00 events/1
1 S     0    15     2  0  80   0 -     0 worker ?        00:00:00 events_long/0
1 S     0    16     2  0  80   0 -     0 worker ?        00:00:00 events_long/1
1 S     0    17     2  0  80   0 -     0 worker ?        00:00:00 events_power_e
1 S     0    18     2  0  80   0 -     0 worker ?        00:00:00 events_power_e
1 S     0    19     2  0  80   0 -     0 worker ?        00:00:00 cgroup
1 S     0    20     2  0  80   0 -     0 worker ?        00:00:00 khelper
1 S     0    21     2  0  80   0 -     0 worker ?        00:00:00 netns
1 S     0    22     2  0  80   0 -     0 async_ ?        00:00:00 async/mgr
1 S     0    23     2  0  80   0 -     0 worker ?        00:00:00 pm
1 S     0    24     2  0  80   0 -     0 bdi_sy ?        00:00:00 sync_supers
1 S     0    25     2  0  80   0 -     0 bdi_fo ?        00:00:00 bdi-default
1 S     0    26     2  0  80   0 -     0 worker ?        00:00:00 kintegrityd/0
1 S     0    27     2  0  80   0 -     0 worker ?        00:00:00 kintegrityd/1
1 S     0    28     2  0  80   0 -     0 worker ?        00:00:00 kblockd/0
1 S     0    29     2  0  80   0 -     0 worker ?        00:00:00 kblockd/1
1 S     0    30     2  0  80   0 -     0 worker ?        00:00:00 kacpid
1 S     0    31     2  0  80   0 -     0 worker ?        00:00:00 kacpi_notify
1 S     0    32     2  0  80   0 -     0 worker ?        00:00:00 kacpi_hotplug
1 S     0    33     2  0  80   0 -     0 worker ?        00:00:00 ata_aux
1 S     0    34     2  0  80   0 -     0 worker ?        00:00:00 ata_sff/0
1 S     0    35     2  0  80   0 -     0 worker ?        00:00:00 ata_sff/1
1 S     0    36     2  0  80   0 -     0 worker ?        00:00:00 ksuspend_usbd
1 S     0    37     2  0  80   0 -     0 hub_th ?        00:00:00 khubd
5 S     0    38     2  0  80   0 -     0 serio_ ?        00:00:00 kseriod
1 S     0    39     2  0  80   0 -     0 worker ?        00:00:00 md/0
1 S     0    40     2  0  80   0 -     0 worker ?        00:00:00 md/1
1 S     0    41     2  0  80   0 -     0 worker ?        00:00:00 md_misc/0
1 S     0    42     2  0  80   0 -     0 worker ?        00:00:00 md_misc/1
1 S     0    43     2  0  80   0 -     0 worker ?        00:00:00 linkwatch
1 S     0    44     2  0  80   0 -     0 watchd ?        00:00:00 khungtaskd
1 S     0    45     2  0  80   0 -     0 kswapd ?        00:00:00 kswapd0
1 S     0    46     2  0  85   5 -     0 ksm_sc ?        00:00:00 ksmd
1 S     0    47     2  0  99  19 -     0 khugep ?        00:00:00 khugepaged
1 S     0    48     2  0  80   0 -     0 worker ?        00:00:00 aio/0
1 S     0    49     2  0  80   0 -     0 worker ?        00:00:00 aio/1
1 S     0    50     2  0  80   0 -     0 worker ?        00:00:00 crypto/0
1 S     0    51     2  0  80   0 -     0 worker ?        00:00:00 crypto/1
1 S     0    58     2  0  80   0 -     0 worker ?        00:00:00 kthrotld/0
1 S     0    59     2  0  80   0 -     0 worker ?        00:00:00 kthrotld/1
1 S     0    61     2  0  80   0 -     0 worker ?        00:00:00 kpsmoused
1 S     0    62     2  0  80   0 -     0 worker ?        00:00:00 usbhid_resumer
1 S     0    63     2  0  80   0 -     0 worker ?        00:00:00 deferwq
1 S     0    96     2  0  80   0 -     0 worker ?        00:00:00 kdmremove
1 S     0    97     2  0  80   0 -     0 worker ?        00:00:00 kstriped
1 S     0   206     2  0  80   0 -     0 scsi_e ?        00:00:00 scsi_eh_0
1 S     0   225     2  0  80   0 -     0 scsi_e ?        00:00:00 scsi_eh_1
1 S     0   226     2  0  80   0 -     0 scsi_e ?        00:00:00 scsi_eh_2
1 S     0   289     2  0  80   0 -     0 worker ?        00:00:00 kdmflush
1 S     0   291     2  0  80   0 -     0 worker ?        00:00:00 kdmflush
1 S     0   309     2  0  80   0 -     0 kjourn ?        00:00:00 jbd2/dm-0-8
1 S     0   310     2  0  80   0 -     0 worker ?        00:00:00 ext4-dio-unwri
5 S     0   391     1  0  76  -4 -  2699 poll_s ?        00:00:00 udevd
1 S     0   452     2  0  80   0 -     0 worker ?        00:00:00 iprt/0
1 S     0   453     2  0  80   0 -     0 worker ?        00:00:00 iprt/1
1 S     0   700     2  0  80   0 -     0 kjourn ?        00:00:00 jbd2/sda1-8
1 S     0   701     2  0  80   0 -     0 worker ?        00:00:00 ext4-dio-unwri
1 S     0   733     2  0  80   0 -     0 kaudit ?        00:00:00 kauditd
1 S     0   809     2  0  80   0 -     0 bdi_wr ?        00:00:00 flush-253:0
1 S     0   966     1  0  80   0 -  2280 poll_s ?        00:00:00 dhclient
5 S     0  1026     1  0  76  -4 -  6899 ep_pol ?        00:00:00 auditd
5 S     0  1048     1  0  80   0 - 62272 poll_s ?        00:00:00 rsyslogd
1 S     0  1160     1  0  80   0 - 83871 rt_sig ?        00:00:02 VBoxService
5 S     0  1184     1  0  80   0 - 16558 poll_s ?        00:00:00 sshd
4 S     0  1217     1  0  80   0 - 27075 wait   ?        00:00:00 mysqld_safe
4 S    27  1421  1217  0  80   0 - 352209 poll_s ?       00:00:09 mysqld
4 S     0  1559     1  0  80   0 - 20219 ep_pol ?        00:00:00 master
4 S    89  1575  1559  0  80   0 - 20282 ep_pol ?        00:00:00 qmgr
1 S     0  1608     1  0  80   0 - 29215 hrtime ?        00:00:00 crond
4 S     0  1621     1  0  80   0 -  1016 n_tty_ tty1     00:00:00 mingetty
4 S     0  1623     1  0  80   0 -  1016 n_tty_ tty2     00:00:00 mingetty
4 S     0  1625     1  0  80   0 -  1016 n_tty_ tty3     00:00:00 mingetty
4 S     0  1627     1  0  80   0 -  1016 n_tty_ tty4     00:00:00 mingetty
4 S     0  1629     1  0  80   0 -  1016 n_tty_ tty5     00:00:00 mingetty
4 S     0  1631     1  0  80   0 -  1016 n_tty_ tty6     00:00:00 mingetty
4 S     0  2451  1184  0  80   0 - 25664 unix_s ?        00:00:00 sshd
5 R   500  2453  2451  0  80   0 - 25664 -      ?        00:00:00 sshd
0 S   500  2454  2453  0  80   0 - 27076 wait   pts/0    00:00:00 bash
4 S     0  2474  2454  0  80   0 - 43777 poll_s pts/0    00:00:00 sudo
4 S     0  2475  2474  0  80   0 - 36250 wait   pts/0    00:00:00 su
4 S     0  2476  2475  0  80   0 - 27076 wait   pts/0    00:00:00 bash
1 S     0  2494     1  0  80   0 -  1233 hrtime ?        00:00:00 iscsid
5 S     0  2495     1  0  70 -10 -  1359 poll_s ?        00:00:02 iscsid
1 S     0  2502     2  0  80   0 -     0 worker ?        00:00:00 iscsi_eh
5 S     0  2504   391  0  78  -2 -  2698 poll_s ?        00:00:00 udevd
5 S     0  2505   391  0  78  -2 -  2698 poll_s ?        00:00:00 udevd
1 S     0  2559     1  0  80   0 - 12017 rt_sig ?        00:00:00 nginx
5 S   497  2560  2559  0  80   0 - 12134 ep_pol ?        00:00:00 nginx
1 S     0  2573     1  0  80   0 -  4763 rt_sig ?        00:00:00 anacron
4 S    89  2900  1559  0  80   0 - 20239 ep_pol ?        00:00:00 pickup
4 R     0  2912  2476  0  80   0 - 27033 -      pts/0    00:00:00 ps
[root@localhost vagrant]#
```

4、查看系统健康状态

```
[root@localhost ~]# top [选项]
选项：
    -d 秒数：    指定top命令每隔几秒更新。默认是3秒
    
在top命令的交互模式当中可以执行的命令：
    ？或h：        显示交互模式的帮助
    P：            以CPU使用率排序，默认就是此项
    M：            以内存的使用率排序
    N：            以PID排序
    q：            退出top
```

第一行信息为任务队列信息

```
内容    说明
12:26:46    系统当前时间
up 1 day, 13:32    系统的运行时间，本机已经运行1天13小时32分钟
2 users    当前登录了两个用户
load average: 0.00, 0.00, 0.00    系统在之前1分钟，5分钟，15分钟的平均负载。一般认为小于1时，负载较小。如果大于1，系统已经超出负荷。
```

第二行为进程信息

```
内容    说明
Tasks:  95 total    系统中的进程总数
1 running    正在运行的进程数
94 sleeping    睡眠的进程
0 stopped    正在停止的进程
0 zombie    僵尸进程。如果不是0，需要手工检查僵尸进程
```

第三行为CPU信息

```
内容    说明
Cpu(s):  0.1%us    用户模式占用的CPU百分比
0.1%sy    系统模式占用的CPU百分比
0.0%ni    改变过优先级的用户进程占用的CPU百分比
99.7%id    空闲CPU的CPU百分比
0.1%wa    等待输入/输出的进程的占用CPU百分比
0.0%hi    硬中断请求服务占用的CPU百分比
0.1%si    软中断请求服务占用的CPU百分比
0.0%st    st（Steal time）虚拟时间百分比。就是当有虚拟机时，虚拟CPU等待实际CPU的时间百分比。
```

第四行为物理内存信息

```
内容    说明
Mem:    625344k total    物理内存的总量，单位KB
571504k used    已经使用的物理内存数量
53840k free    空闲的物理内存数量，我们使用的是虚拟机，总共只分配了628MB内存，所以只有53MB的空闲内存了
65800k buffers    作为缓冲的内存数量
```

第五行为交换分区（swap）信息

```
内容    说明
Swap:   524280k total    交换分区（虚拟内存）的总大小
0k used    已经使用的交互分区的大小
524280k free    空闲交换分区的大小
409280k cached    作为缓存的交互分区的大小
```

```
top - 09:44:15 up  1:38,  1 user,  load average: 0.00, 0.00, 0.00
Tasks: 103 total,   1 running, 102 sleeping,   0 stopped,   0 zombie
Cpu(s):  0.0%us,  0.2%sy,  0.0%ni, 99.8%id,  0.0%wa,  0.0%hi,  0.0%si,  0.0%st
Mem:   1922148k total,   622284k used,  1299864k free,    10600k buffers
Swap:  1023996k total,        0k used,  1023996k free,    84288k cached

  PID USER      PR  NI  VIRT  RES  SHR S %CPU %MEM    TIME+  COMMAND
 2495 root      10 -10  5436 3384 2220 S  0.3  0.2   0:03.83 iscsid
    1 root      20   0 19232 1488 1216 S  0.0  0.1   0:00.67 init
    2 root      20   0     0    0    0 S  0.0  0.0   0:00.01 kthreadd
    3 root      RT   0     0    0    0 S  0.0  0.0   0:00.54 migration/0
    4 root      20   0     0    0    0 S  0.0  0.0   0:00.21 ksoftirqd/0
    5 root      RT   0     0    0    0 S  0.0  0.0   0:00.00 stopper/0
    6 root      RT   0     0    0    0 S  0.0  0.0   0:00.07 watchdog/0
    7 root      RT   0     0    0    0 S  0.0  0.0   0:00.04 migration/1
    8 root      RT   0     0    0    0 S  0.0  0.0   0:00.00 stopper/1
    9 root      20   0     0    0    0 S  0.0  0.0   0:00.51 ksoftirqd/1
   10 root      RT   0     0    0    0 S  0.0  0.0   0:00.10 watchdog/1
   11 root      20   0     0    0    0 S  0.0  0.0   0:00.74 events/0
   12 root      20   0     0    0    0 S  0.0  0.0   0:03.05 events/1
   13 root      20   0     0    0    0 S  0.0  0.0   0:00.00 events/0
   14 root      20   0     0    0    0 S  0.0  0.0   0:00.00 events/1
   15 root      20   0     0    0    0 S  0.0  0.0   0:00.00 events_long/0
   16 root      20   0     0    0    0 S  0.0  0.0   0:00.00 events_long/1
   17 root      20   0     0    0    0 S  0.0  0.0   0:00.00 events_power_ef
   18 root      20   0     0    0    0 S  0.0  0.0   0:00.00 events_power_ef
   19 root      20   0     0    0    0 S  0.0  0.0   0:00.00 cgroup
   20 root      20   0     0    0    0 S  0.0  0.0   0:00.00 khelper
   21 root      20   0     0    0    0 S  0.0  0.0   0:00.00 netns
   22 root      20   0     0    0    0 S  0.0  0.0   0:00.00 async/mgr
   23 root      20   0     0    0    0 S  0.0  0.0   0:00.00 pm
   24 root      20   0     0    0    0 S  0.0  0.0   0:00.11 sync_supers
   25 root      20   0     0    0    0 S  0.0  0.0   0:00.11 bdi-default
   26 root      20   0     0    0    0 S  0.0  0.0   0:00.00 kintegrityd/0
   27 root      20   0     0    0    0 S  0.0  0.0   0:00.00 kintegrityd/1
   28 root      20   0     0    0    0 S  0.0  0.0   0:00.23 kblockd/0
   29 root      20   0     0    0    0 S  0.0  0.0   0:00.00 kblockd/1
   30 root      20   0     0    0    0 S  0.0  0.0   0:00.00 kacpid
   31 root      20   0     0    0    0 S  0.0  0.0   0:00.00 kacpi_notify
   32 root      20   0     0    0    0 S  0.0  0.0   0:00.00 kacpi_hotplug
   33 root      20   0     0    0    0 S  0.0  0.0   0:00.00 ata_aux
   34 root      20   0     0    0    0 S  0.0  0.0   0:00.00 ata_sff/0
   35 root      20   0     0    0    0 S  0.0  0.0   0:00.00 ata_sff/1
   36 root      20   0     0    0    0 S  0.0  0.0   0:00.00 ksuspend_usbd
   37 root      20   0     0    0    0 S  0.0  0.0   0:00.00 khubd
   38 root      20   0     0    0    0 S  0.0  0.0   0:00.00 kseriod
   39 root      20   0     0    0    0 S  0.0  0.0   0:00.00 md/0
   40 root      20   0     0    0    0 S  0.0  0.0   0:00.00 md/1
   41 root      20   0     0    0    0 S  0.0  0.0   0:00.00 md_misc/0
   42 root      20   0     0    0    0 S  0.0  0.0   0:00.00 md_misc/1
```

5、查看进程树

```
[root@localhost ~]# pstree [选项]
选项：
    -p：    显示进程的PID
    -u：    显示进程的所属用户
```

```
[root@localhost vagrant]# pstree
init─┬─VBoxService───7*[{VBoxService}]
     ├─auditd───{auditd}
     ├─crond
     ├─dhclient
     ├─2*[iscsid]
     ├─master─┬─pickup
     │        └─qmgr
     ├─6*[mingetty]
     ├─mysqld_safe───mysqld───21*[{mysqld}]
     ├─nginx───nginx
     ├─rsyslogd───3*[{rsyslogd}]
     ├─sshd───sshd───sshd───bash───sudo───su───bash───pstree
     └─udevd───2*[udevd]
[root@localhost vagrant]#
```

#### 13.1.2  进程管理

1、kill命令

```
[root@localhost ~]# kill –l
#查看可用的进程信号

[root@localhost vagrant]# kill -l
 1) SIGHUP       2) SIGINT       3) SIGQUIT      4) SIGILL       5) SIGTRAP
 6) SIGABRT      7) SIGBUS       8) SIGFPE       9) SIGKILL     10) SIGUSR1
11) SIGSEGV     12) SIGUSR2     13) SIGPIPE     14) SIGALRM     15) SIGTERM
16) SIGSTKFLT   17) SIGCHLD     18) SIGCONT     19) SIGSTOP     20) SIGTSTP
21) SIGTTIN     22) SIGTTOU     23) SIGURG      24) SIGXCPU     25) SIGXFSZ
26) SIGVTALRM   27) SIGPROF     28) SIGWINCH    29) SIGIO       30) SIGPWR
31) SIGSYS      34) SIGRTMIN    35) SIGRTMIN+1  36) SIGRTMIN+2  37) SIGRTMIN+3
38) SIGRTMIN+4  39) SIGRTMIN+5  40) SIGRTMIN+6  41) SIGRTMIN+7  42) SIGRTMIN+8
43) SIGRTMIN+9  44) SIGRTMIN+10 45) SIGRTMIN+11 46) SIGRTMIN+12 47) SIGRTMIN+13
48) SIGRTMIN+14 49) SIGRTMIN+15 50) SIGRTMAX-14 51) SIGRTMAX-13 52) SIGRTMAX-12
53) SIGRTMAX-11 54) SIGRTMAX-10 55) SIGRTMAX-9  56) SIGRTMAX-8  57) SIGRTMAX-7
58) SIGRTMAX-6  59) SIGRTMAX-5  60) SIGRTMAX-4  61) SIGRTMAX-3  62) SIGRTMAX-2
63) SIGRTMAX-1  64) SIGRTMAX
[root@localhost vagrant]#

```

```
信号代号    信号名称    说明
1    SIGHUP    该信号让进程立即关闭，然后重新读取配置文件之后重启。
2    SIGINT    程序终止信号，用于终止前台进程。相当于输出ctrl+c快捷键。
8    SIGFPE    在发生致命的算术运算错误时发出. 不仅包括浮点运算错误, 还包括溢出及除数为0等其它所有的算术的错误。
9    SIGKILL    用来立即结束程序的运行. 本信号不能被阻塞、处理和忽略。一般用于强制终止进程。
14    SIGALRM    时钟定时信号, 计算的是实际的时间或时钟时间. alarm函数使用该信号。
15    SIGTERM    正常结束进程的信号，kill命令的默认信号。有时如果进程已经发生问题，这个信号是无法正常终止进程的，我们才会尝试SIGKILL信号，也就是信号9。
18    SIGCONT    该信号可以让暂停的进程恢复执行，本信号不能被阻断。
19    SIGSTOP    该信号可以暂停前台进程，相当于输入ctrl+z快捷键。本信号不能被阻断。
```

```
[root@localhost ~]# kill -1 22354
#重启进程

[root@localhost ~]# kill -9 22368
#强制杀死进程
```

2、killall命令

```
[root@localhost ~]# killall [选项][信号] 进程名
#按照进程名杀死进程
选项：
    -i：    交互式，询问是否要杀死某个进程
    -I：    忽略进程名的大小写
```

3、pkill命令

```
[root@localhost ~]# pkill [选项] [信号] 进程名
#按照进程名终止进程
选项：
    -t 终端号：    按照终端号踢出用户
```

按照终端号踢出用户

```
[root@localhost ~]# w
#使用w命令查询本机已经登录的用户

[root@localhost ~]# pkill -t -9 pts/1
#强制杀死从pts/1虚拟终端登录的进程
```

```
[root@localhost vagrant]# w
 09:58:52 up  1:53,  1 user,  load average: 0.00, 0.00, 0.00
USER     TTY      FROM              LOGIN@   IDLE   JCPU   PCPU WHAT
vagrant  pts/0    10.0.2.2         07:45    0.00s  0.30s  0.12s sshd: vagrant [priv]
[root@localhost vagrant]#
```

### 13.2 工作管理

1、把进程放入后台

```
[root@localhost ~]# tar -zcf etc.tar.gz /etc &
# 进程处于运行状态

[root@localhost ~]# top
#在top命令执行的过程中，按下ctrl+z快捷键，进程处于暂停状态
```

2、查看后台的工作

```
[root@localhost ~]# jobs [-l]
选项：
	-l：	显示工作的PID

注：“+”号代表最近一个放入后台的工作，也是工作恢复时，默认恢复的工作。“-”号代表倒数第二个放入后台的工作
```

3、将后台暂停的工作恢复到前台执行

```
[root@localhost ~]# fg %工作号
参数：
	%工作号：	%号可以省略，但是注意工作号			和PID的区别
```

4、把后台暂停的工作恢复到后台执行

```
[root@localhost ~]# bg %工作号

注：后台恢复执行的命令，是不能和前台有交互的，否则不能恢复到后台执行
```


### 13.3 系统资源查看

1、vmstat命令监控系统资源

```
[root@localhost ~]# vmstat  [刷新延时 刷新次数]
```

例如：
```
[root@localhost ~]# vmstat 1  3  //表示查看系统资源3次，每次间隔一秒钟

[root@localhost vagrant]# vmstat 1 3
procs -----------memory---------- ---swap-- -----io---- --system-- -----cpu-----
 r  b   swpd   free   buff  cache   si   so    bi    bo   in   cs us sy id wa st
 0  0      0 1299252  10928  84348    0    0     6     0   15   31  0  0 100  0  0
 0  0      0 1299236  10928  84348    0    0     0     8   37   65  0  0 100  0  0
 0  0      0 1299236  10928  84348    0    0     0     0   32   63  0  0 100  0  0
[root@localhost vagrant]#
```

2、dmesg开机时内核检测信息

```
[root@localhost ~]# dmesg
[root@localhost ~]# dmesg | grep CPU
```

```
[root@localhost vagrant]# dmesg
Initializing cgroup subsys cpuset
Initializing cgroup subsys cpu
Linux version 2.6.32-573.7.1.el6.x86_64 (mockbuild@c6b8.bsys.dev.centos.org) (gcc version 4.4.7 20120313 (Red Hat 4.4.7-16) (GCC) ) #1 SMP Tue Sep 22 22:00:00 UTC 2015
Command line: ro root=/dev/mapper/VolGroup-lv_root rd_NO_LUKS LANG=en_GB.UTF-8 rd_NO_MD rd_LVM_LV=VolGroup/lv_swap SYSFONT=latarcyrheb-sun16 crashkernel=auto rd_LVM_LV=VolGroup/lv_root  KEYBOARDTYPE=pc KEYTABLE=us rd_NO_DM rhgb quiet
KERNEL supported cpus:
  Intel GenuineIntel
  AMD AuthenticAMD
  Centaur CentaurHauls
BIOS-provided physical RAM map:
 BIOS-e820: 0000000000000000 - 000000000009fc00 (usable)
 BIOS-e820: 000000000009fc00 - 00000000000a0000 (reserved)
 BIOS-e820: 00000000000f0000 - 0000000000100000 (reserved)
 BIOS-e820: 0000000000100000 - 000000007fff0000 (usable)
 BIOS-e820: 000000007fff0000 - 0000000080000000 (ACPI data)
 BIOS-e820: 00000000fffc0000 - 0000000100000000 (reserved)
DMI 2.5 present.
SMBIOS version 2.5 @ 0xFFF60
DMI: innotek GmbH VirtualBox/VirtualBox, BIOS VirtualBox 12/01/2006
e820 update range: 0000000000000000 - 0000000000001000 (usable) ==> (reserved)
e820 remove range: 00000000000a0000 - 0000000000100000 (usable)
No AGP bridge found
last_pfn = 0x7fff0 max_arch_pfn = 0x400000000
x86 PAT enabled: cpu 0, old 0x7040600070406, new 0x7010600070106
CPU MTRRs all blank - virtualized system.
initial memory mapped : 0 - 20000000
init_memory_mapping: 0000000000000000-000000007fff0000
 0000000000 - 007fe00000 page 2M
 007fe00000 - 007fff0000 page 4k
kernel direct mapping tables up to 7fff0000 @ 8000-c000
RAMDISK: 36c03000 - 37fefdf4
ACPI: Deleted _OSI()
ACPI: Deleted _OSI()
ACPI: RSDP 00000000000e0000 00024 (v02 VBOX  )
ACPI: XSDT 000000007fff0030 0003C (v01 VBOX   VBOXXSDT 00000001 ASL  00000061)
ACPI: FACP 000000007fff00f0 000F4 (v04 VBOX   VBOXFACP 00000001 ASL  00000061)
ACPI: DSDT 000000007fff0470 01B96 (v01 VBOX   VBOXBIOS 00000002 INTL 20100528)
ACPI: FACS 000000007fff0200 00040
ACPI: APIC 000000007fff0240 0005C (v02 VBOX   VBOXAPIC 00000001 ASL  00000061)
ACPI: SSDT 000000007fff02a0 001CC (v01 VBOX   VBOXCPUT 00000002 INTL 20100528)
ACPI: Local APIC address 0xfee00000
Setting APIC routing to flat.
No NUMA configuration found
Faking a node at 0000000000000000-000000007fff0000
Bootmem setup node 0 0000000000000000-000000007fff0000
  NODE_DATA [000000000000a000 - 000000000003dfff]
  bootmap [000000000003e000 -  000000000004dfff] pages 10
(7 early reservations) ==> bootmem [0000000000 - 007fff0000]
  #0 [0000000000 - 0000001000]   BIOS data page ==> [0000000000 - 0000001000]
  #1 [0000006000 - 0000008000]       TRAMPOLINE ==> [0000006000 - 0000008000]
  #2 [0001000000 - 000203cb64]    TEXT DATA BSS ==> [0001000000 - 000203cb64]
  #3 [0036c03000 - 0037fefdf4]          RAMDISK ==> [0036c03000 - 0037fefdf4]
  #4 [000009f800 - 0000100000]    BIOS reserved ==> [000009f800 - 0000100000]
  #5 [000203d000 - 000203d13c]              BRK ==> [000203d000 - 000203d13c]
  #6 [0000008000 - 000000a000]          PGTABLE ==> [0000008000 - 000000a000]
found SMP MP-table at [ffff88000009fff0] 9fff0
Reserving 129MB of memory at 48MB for crashkernel (System RAM: 2047MB)
 [ffffea0000000000-ffffea00009fffff] PMD -> [ffff880002600000-ffff880002ffffff] on node 0
 [ffffea0000a00000-ffffea0001bfffff] PMD -> [ffff88000b200000-ffff88000c3fffff] on node 0
Zone PFN ranges:
  DMA      0x00000001 -> 0x00001000
  DMA32    0x00001000 -> 0x00100000
  Normal   0x00100000 -> 0x00100000
Movable zone start PFN for each node
early_node_map[2] active PFN ranges
    0: 0x00000001 -> 0x0000009f
    0: 0x00000100 -> 0x0007fff0
On node 0 totalpages: 524174
  DMA zone: 56 pages used for memmap
  DMA zone: 101 pages reserved
  DMA zone: 3841 pages, LIFO batch:0
  DMA32 zone: 7112 pages used for memmap
  DMA32 zone: 513064 pages, LIFO batch:31
ACPI: PM-Timer IO Port: 0x4008
ACPI: Local APIC address 0xfee00000
Setting APIC routing to flat.
ACPI: LAPIC (acpi_id[0x00] lapic_id[0x00] enabled)
ACPI: LAPIC (acpi_id[0x01] lapic_id[0x01] enabled)
ACPI: IOAPIC (id[0x02] address[0xfec00000] gsi_base[0])
IOAPIC[0]: apic_id 2, version 17, address 0xfec00000, GSI 0-23
ACPI: INT_SRC_OVR (bus 0 bus_irq 0 global_irq 2 dfl dfl)
ACPI: INT_SRC_OVR (bus 0 bus_irq 9 global_irq 9 high level)
ACPI: IRQ0 used by override.
ACPI: IRQ2 used by override.
ACPI: IRQ9 used by override.
Using ACPI (MADT) for SMP configuration information
SMP: Allowing 2 CPUs, 0 hotplug CPUs
nr_irqs_gsi: 24
PM: Registered nosave memory: 000000000009f000 - 00000000000a0000
PM: Registered nosave memory: 00000000000a0000 - 00000000000f0000
PM: Registered nosave memory: 00000000000f0000 - 0000000000100000
Allocating PCI resources starting at 80000000 (gap: 80000000:7ffc0000)
Booting paravirtualized kernel on bare hardware
NR_CPUS:4096 nr_cpumask_bits:2 nr_cpu_ids:2 nr_node_ids:1
PERCPU: Embedded 30 pages/cpu @ffff880002200000 s91224 r8192 d23464 u1048576
pcpu-alloc: s91224 r8192 d23464 u1048576 alloc=1*2097152
pcpu-alloc: [0] 0 1
Built 1 zonelists in Node order, mobility grouping on.  Total pages: 516905
Policy zone: DMA32
Kernel command line: ro root=/dev/mapper/VolGroup-lv_root rd_NO_LUKS LANG=en_GB.UTF-8 rd_NO_MD rd_LVM_LV=VolGroup/lv_swap SYSFONT=latarcyrheb-sun16 crashkernel=129M@0M rd_LVM_LV=VolGroup/lv_root  KEYBOARDTYPE=pc KEYTABLE=us rd_NO_DM rhgb quiet
PID hash table entries: 4096 (order: 3, 32768 bytes)
Checking aperture...
No AGP bridge found
Memory: 1898148k/2097088k available (5395k kernel code, 392k absent, 198548k reserved, 7013k data, 1296k init)
Hierarchical RCU implementation.
NR_IRQS:33024 nr_irqs:424
Console: colour VGA+ 80x25
console [tty0] enabled
allocated 8388608 bytes of page_cgroup
please try 'cgroup_disable=memory' option if you don't want memory cgroups
Fast TSC calibration failed
TSC: PIT calibration matches PMTIMER. 2 loops
Detected 2274.917 MHz processor.
Calibrating delay loop (skipped), value calculated using timer frequency.. 4549.83 BogoMIPS (lpj=2274917)
pid_max: default: 32768 minimum: 301
Security Framework initialized
SELinux:  Initializing.
SELinux:  Starting in permissive mode
Dentry cache hash table entries: 262144 (order: 9, 2097152 bytes)
Inode-cache hash table entries: 131072 (order: 8, 1048576 bytes)
Mount-cache hash table entries: 256
Initializing cgroup subsys ns
Initializing cgroup subsys cpuacct
Initializing cgroup subsys memory
Initializing cgroup subsys devices
Initializing cgroup subsys freezer
Initializing cgroup subsys net_cls
Initializing cgroup subsys blkio
Initializing cgroup subsys perf_event
Initializing cgroup subsys net_prio
CPU: Physical Processor ID: 0
CPU: Processor Core ID: 0
mce: CPU supports 0 MCE banks
ACPI: Core revision 20090903
ftrace: converting mcount calls to 0f 1f 44 00 00
ftrace: allocating 22128 entries in 87 pages
APIC routing finalized to flat.
..TIMER: vector=0x30 apic1=0 pin1=2 apic2=-1 pin2=-1
CPU0: Intel(R) Core(TM) i5-6300HQ CPU @ 2.30GHz stepping 03
Performance Events: unsupported p6 CPU model 94 no PMU driver, software events only.
NMI watchdog disabled (cpu0): hardware events not enabled
Booting Node   0, Processors  #1 Ok.
mce: CPU supports 0 MCE banks
TSC synchronization [CPU#0 -> CPU#1]:
Measured 5639 cycles TSC warp between CPUs, turning off TSC clock.
Marking TSC unstable due to check_tsc_sync_source failed
Brought up 2 CPUs
Total of 2 processors activated (9099.66 BogoMIPS).
sizeof(vma)=200 bytes
sizeof(page)=56 bytes
sizeof(inode)=592 bytes
sizeof(dentry)=192 bytes
sizeof(ext3inode)=800 bytes
sizeof(buffer_head)=104 bytes
sizeof(skbuff)=232 bytes
sizeof(task_struct)=2672 bytes
devtmpfs: initialized
regulator: core version 0.5
NET: Registered protocol family 16
ACPI: bus type pci registered
PCI: Using configuration type 1 for base access
bio: create slab <bio-0> at 0
ACPI: EC: Look up EC in DSDT
ACPI: Executed 1 blocks of module-level executable AML code
ACPI: Interpreter enabled
ACPI: (supports S0 S5)
ACPI: Using IOAPIC for interrupt routing
ACPI: No dock devices found.
PCI: Ignoring host bridge windows from ACPI; if necessary, use "pci=use_crs" and report a bug
ACPI: PCI Root Bridge [PCI0] (domain 0000 [bus 00-ff])
pci_root PNP0A03:00: host bridge window [io  0x0000-0x0cf7] (ignored)
pci_root PNP0A03:00: host bridge window [io  0x0d00-0xffff] (ignored)
pci_root PNP0A03:00: host bridge window [mem 0x000a0000-0x000bffff] (ignored)
pci_root PNP0A03:00: host bridge window [mem 0x80000000-0xffdfffff] (ignored)
PCI: root bus 00: using default resources
PCI host bridge to bus 0000:00
pci_bus 0000:00: root bus resource [io  0x0000-0xffff]
pci_bus 0000:00: root bus resource [mem 0x00000000-0x7fffffffff]
pci 0000:00:01.1: reg 20: [io  0xd000-0xd00f]
pci 0000:00:02.0: reg 10: [mem 0xe0000000-0xe07fffff pref]
pci 0000:00:03.0: reg 10: [mem 0xf0000000-0xf001ffff]
pci 0000:00:03.0: reg 18: [io  0xd010-0xd017]
pci 0000:00:04.0: reg 10: [io  0xd020-0xd03f]
pci 0000:00:04.0: reg 14: [mem 0xf0400000-0xf07fffff]
pci 0000:00:04.0: reg 18: [mem 0xf0800000-0xf0803fff pref]
pci 0000:00:0d.0: reg 10: [io  0xd040-0xd047]
pci 0000:00:0d.0: reg 18: [io  0xd050-0xd057]
pci 0000:00:0d.0: reg 20: [io  0xd060-0xd06f]
pci 0000:00:0d.0: reg 24: [mem 0xf0804000-0xf0805fff]
ACPI: PCI Interrupt Routing Table [\_SB_.PCI0._PRT]
ACPI: PCI Interrupt Link [LNKA] (IRQs 5 9 10 *11)
ACPI: PCI Interrupt Link [LNKB] (IRQs 5 9 10 *11)
ACPI: PCI Interrupt Link [LNKC] (IRQs 5 9 *10 11)
ACPI: PCI Interrupt Link [LNKD] (IRQs 5 *9 10 11)
vgaarb: device added: PCI:0000:00:02.0,decodes=io+mem,owns=io+mem,locks=none
vgaarb: loaded
vgaarb: bridge control possible 0000:00:02.0
SCSI subsystem initialized
libata version 3.00 loaded.
usbcore: registered new interface driver usbfs
usbcore: registered new interface driver hub
usbcore: registered new device driver usb
PCI: Using ACPI for IRQ routing
PCI: old code would have set cacheline size to 32 bytes, but clflush_size = 64
PCI: pci_cache_line_size set to 64 bytes
NetLabel: Initializing
NetLabel:  domain hash size = 128
NetLabel:  protocols = UNLABELED CIPSOv4
NetLabel:  unlabeled traffic allowed by default
Switching to clocksource jiffies
pnp: PnP ACPI init
ACPI: bus type pnp registered
pnp 00:00: [io  0x0cf8-0x0cff]
pnp 00:00: Plug and Play ACPI device, IDs PNP0a03 (active)
pnp 00:01: [io  0x0060]
pnp 00:01: [io  0x0064]
pnp 00:01: [irq 1]
pnp 00:01: Plug and Play ACPI device, IDs PNP0303 (active)
pnp 00:02: [io  0x0000-0x000f]
pnp 00:02: [io  0x0080-0x008f]
pnp 00:02: [io  0x00c0-0x00df]
pnp 00:02: [dma 4]
pnp 00:02: Plug and Play ACPI device, IDs PNP0200 (active)
pnp 00:03: [irq 12]
pnp 00:03: Plug and Play ACPI device, IDs PNP0f03 (active)
pnp 00:04: [io  0x0378-0x037f]
pnp 00:04: [io  0x0778-0x077f]
pnp 00:04: [irq 7]
pnp 00:04: Plug and Play ACPI device, IDs PNP0400 (active)
pnp: PnP ACPI: found 5 devices
ACPI: ACPI bus type pnp unregistered
Switching to clocksource acpi_pm
pci_bus 0000:00: resource 4 [io  0x0000-0xffff]
pci_bus 0000:00: resource 5 [mem 0x00000000-0x7fffffffff]
NET: Registered protocol family 2
IP route cache hash table entries: 65536 (order: 7, 524288 bytes)
TCP established hash table entries: 262144 (order: 10, 4194304 bytes)
TCP bind hash table entries: 65536 (order: 8, 1048576 bytes)
TCP: Hash tables configured (established 262144 bind 65536)
TCP reno registered
NET: Registered protocol family 1
pci 0000:00:00.0: Limiting direct PCI/PCI transfers
pci 0000:00:01.0: Activating ISA DMA hang workarounds
pci 0000:00:02.0: Boot video device
Trying to unpack rootfs image as initramfs...
Freeing initrd memory: 20403k freed
platform rtc_cmos: registered platform RTC device (no PNP device found)
futex hash table entries: 512 (order: 3, 32768 bytes)
audit: initializing netlink socket (disabled)
type=2000 audit(1621147490.596:1): initialized
HugeTLB registered 2 MB page size, pre-allocated 0 pages
VFS: Disk quotas dquot_6.5.2
Dquot-cache hash table entries: 512 (order 0, 4096 bytes)
msgmni has been set to 3747
SELinux:  Registering netfilter hooks
ksign: Installing public key data
Loading keyring
- Added public key 4C9849B5454FBC41
- User ID: CentOS (Kernel Module GPG key)
Block layer SCSI generic (bsg) driver version 0.4 loaded (major 251)
io scheduler noop registered
io scheduler anticipatory registered
io scheduler deadline registered
io scheduler cfq registered (default)
pci_hotplug: PCI Hot Plug PCI Core version: 0.5
pciehp: PCI Express Hot Plug Controller Driver version: 0.4
acpiphp: ACPI Hot Plug PCI Controller Driver version: 0.5
ACPI: AC Adapter [AC] (on-line)
input: Power Button as /devices/LNXSYSTM:00/LNXPWRBN:00/input/input0
ACPI: Power Button [PWRF]
input: Sleep Button as /devices/LNXSYSTM:00/LNXSLPBN:00/input/input1
ACPI: Sleep Button [SLPF]
ACPI: acpi_idle registered with cpuidle
[Firmware Bug]: No valid trip found
GHES: HEST is not enabled!
Non-volatile memory driver v1.3
Linux agpgart interface v0.103
ACPI: Battery Slot [BAT0] (battery present)
crash memory driver: version 1.1
Serial: 8250/16550 driver, 4 ports, IRQ sharing enabled
brd: module loaded
loop: module loaded
input: Macintosh mouse button emulation as /devices/virtual/input/input2
Fixed MDIO Bus: probed
ehci_hcd: USB 2.0 'Enhanced' Host Controller (EHCI) Driver
ohci_hcd: USB 1.1 'Open' Host Controller (OHCI) Driver
uhci_hcd: USB Universal Host Controller Interface driver
PNP: PS/2 Controller [PNP0303:PS2K,PNP0f03:PS2M] at 0x60,0x64 irq 1,12
serio: i8042 KBD port at 0x60,0x64 irq 1
serio: i8042 AUX port at 0x60,0x64 irq 12
mice: PS/2 mouse device common for all mice
rtc_cmos rtc_cmos: rtc core: registered rtc_cmos as rtc0
rtc0: alarms up to one day, 114 bytes nvram
cpuidle: using governor ladder
cpuidle: using governor menu
EFI Variables Facility v0.08 2004-May-17
input: AT Translated Set 2 keyboard as /devices/platform/i8042/serio0/input/input3
usbcore: registered new interface driver hiddev
usbcore: registered new interface driver usbhid
usbhid: v2.6:USB HID core driver
GRE over IPv4 demultiplexor driver
TCP cubic registered
Initializing XFRM netlink socket
NET: Registered protocol family 17
registered taskstats version 1
rtc_cmos rtc_cmos: setting system clock to 2021-05-16 06:44:50 UTC (1621147490)
Initalizing network drop monitor service
Freeing unused kernel memory: 1296k freed
Write protecting the kernel read-only data: 10240k
Freeing unused kernel memory: 728k freed
Freeing unused kernel memory: 1572k freed
input: ImExPS/2 Generic Explorer Mouse as /devices/platform/i8042/serio1/input/input4
dracut: dracut-004-388.el6
dracut: rd_NO_LUKS: removing cryptoluks activation
device-mapper: uevent: version 1.0.3
device-mapper: ioctl: 4.29.0-ioctl (2014-10-28) initialised: dm-devel@redhat.com
udev: starting version 147
dracut: Starting plymouth daemon
dracut: rd_NO_MD: removing MD RAID activation
ahci 0000:00:0d.0: version 3.0
  alloc irq_desc for 21 on node -1
  alloc kstat_irqs on node -1
ahci 0000:00:0d.0: PCI INT A -> GSI 21 (level, low) -> IRQ 21
ahci: SSS flag set, parallel bus scan disabled
ahci 0000:00:0d.0: AHCI 0001.0100 32 slots 1 ports 3 Gbps 0x1 impl SATA mode
ahci 0000:00:0d.0: flags: 64bit ncq stag only ccc
ahci 0000:00:0d.0: setting latency timer to 64
scsi0 : ahci
ata1: SATA max UDMA/133 abar m8192@0xf0804000 port 0xf0804100 irq 21
ata1: SATA link up 3.0 Gbps (SStatus 123 SControl 300)
ata1.00: ATA-6: VBOX HARDDISK, 1.0, max UDMA/133
ata1.00: 20480000 sectors, multi 128: LBA48 NCQ (depth 31/32)
ata1.00: configured for UDMA/133
scsi 0:0:0:0: Direct-Access     ATA      VBOX HARDDISK    1.0  PQ: 0 ANSI: 5
ata_piix 0000:00:01.1: version 2.13
ata_piix 0000:00:01.1: setting latency timer to 64
scsi1 : ata_piix
scsi2 : ata_piix
ata2: PATA max UDMA/33 cmd 0x1f0 ctl 0x3f6 bmdma 0xd000 irq 14
ata3: PATA max UDMA/33 cmd 0x170 ctl 0x376 bmdma 0xd008 irq 15
sd 0:0:0:0: [sda] 20480000 512-byte logical blocks: (10.4 GB/9.76 GiB)
sd 0:0:0:0: [sda] Write Protect is off
sd 0:0:0:0: [sda] Mode Sense: 00 3a 00 00
sd 0:0:0:0: [sda] Write cache: enabled, read cache: enabled, doesn't support DPO or FUA
 sda: sda1 sda2
sd 0:0:0:0: [sda] Attached SCSI disk
dracut: Scanning devices sda2  for LVM logical volumes VolGroup/lv_swap VolGroup/lv_root
dracut: inactive '/dev/VolGroup/lv_root' [8.30 GiB] inherit
dracut: inactive '/dev/VolGroup/lv_swap' [1000.00 MiB] inherit
EXT4-fs (dm-0): mounted filesystem with ordered data mode. Opts:
dracut: Mounted root filesystem /dev/mapper/VolGroup-lv_root
SELinux:  Disabled at runtime.
SELinux:  Unregistering netfilter hooks
type=1404 audit(1621147492.154:2): selinux=0 auid=4294967295 ses=4294967295
dracut:
dracut: Switching root
udev: starting version 147
e1000: Intel(R) PRO/1000 Network Driver - version 7.3.21-k8-NAPI
e1000: Copyright (c) 1999-2006 Intel Corporation.
  alloc irq_desc for 19 on node -1
  alloc kstat_irqs on node -1
e1000 0000:00:03.0: PCI INT A -> GSI 19 (level, low) -> IRQ 19
e1000 0000:00:03.0: setting latency timer to 64
e1000 0000:00:03.0: eth0: (PCI:33MHz:32-bit) 08:00:27:20:20:f4
e1000 0000:00:03.0: eth0: Intel(R) PRO/1000 Network Connection
  alloc irq_desc for 20 on node -1
  alloc kstat_irqs on node -1
vboxguest 0000:00:04.0: PCI INT A -> GSI 20 (level, low) -> IRQ 20
input: Unspecified device as /devices/pci0000:00/0000:00:04.0/input/input5
vboxguest: misc device minor 57, IRQ 20, I/O port d020, MMIO at 00000000f0400000 (size 0x400000)
vboxguest: Successfully loaded version 4.3.30 (interface 0x00010004)
piix4_smbus 0000:00:07.0: SMBus base address uninitialized - upgrade BIOS or use force_addr=0xaddr
sd 0:0:0:0: Attached scsi generic sg0 type 0
parport_pc 00:04: reported by Plug and Play ACPI
ppdev: user-space parallel port driver
EXT4-fs (sda1): mounted filesystem with ordered data mode. Opts:
Adding 1023996k swap on /dev/mapper/VolGroup-lv_swap.  Priority:-1 extents:1 across:1023996k
NET: Registered protocol family 10
lo: Disabled Privacy Extensions
e1000: eth0 NIC Link is Up 1000 Mbps Full Duplex, Flow Control: RX
type=1305 audit(1621143900.408:3): audit_pid=1026 old=0 auid=4294967295 ses=4294967295 res=1
vboxsf: Successfully loaded version 4.3.30 (interface 0x00010004)
VBoxService 4.3.30 r101610 (verbosity: 0) linux.amd64 (Jul 10 2015 13:11:37) release log
00:00:00.000104 main     Log opened 2021-05-16T05:45:01.031819000Z
00:00:00.000219 main     OS Product: Linux
00:00:00.000263 main     OS Release: 2.6.32-573.7.1.el6.x86_64
00:00:00.000304 main     OS Version: #1 SMP Tue Sep 22 22:00:00 UTC 2015
00:00:00.000343 main     OS Service Pack: #1 SMP Tue Sep 22 22:00:00 UTC 2015
00:00:00.000385 main     Executable: /opt/VBoxGuestAdditions-4.3.30/sbin/VBoxService
00:00:00.000391 main     Process ID: 1156
00:00:00.000395 main     Package type: LINUX_64BITS_GENERIC
00:00:00.002801 main     4.3.30 r101610 started. Verbose level = 0
00:00:00.011095 vminfo   Error: Unable to connect to system D-Bus (1/3): Failed to connect to socket /var/run/dbus/system_bus_socket: No such file or directory
hrtimer: interrupt took 3452394 ns
eth0: no IPv6 routers present
00:00:05.015617 vminfo   Error: Unable to connect to system D-Bus (2/3): Failed to connect to socket /var/run/dbus/system_bus_socket: No such file or directory
00:00:10.156215 vminfo   Error: Unable to connect to system D-Bus (3/3): Failed to connect to socket /var/run/dbus/system_bus_socket: No such file or directory
Loading iSCSI transport class v2.0-870.
[root@localhost vagrant]#
```

```
[root@localhost vagrant]# dmesg | grep CPU
CPU MTRRs all blank - virtualized system.
ACPI: SSDT 000000007fff02a0 001CC (v01 VBOX   VBOXCPUT 00000002 INTL 20100528)
SMP: Allowing 2 CPUs, 0 hotplug CPUs
NR_CPUS:4096 nr_cpumask_bits:2 nr_cpu_ids:2 nr_node_ids:1
PERCPU: Embedded 30 pages/cpu @ffff880002200000 s91224 r8192 d23464 u1048576
CPU: Physical Processor ID: 0
CPU: Processor Core ID: 0
mce: CPU supports 0 MCE banks
CPU0: Intel(R) Core(TM) i5-6300HQ CPU @ 2.30GHz stepping 03
Performance Events: unsupported p6 CPU model 94 no PMU driver, software events only.
mce: CPU supports 0 MCE banks
TSC synchronization [CPU#0 -> CPU#1]:
Measured 5639 cycles TSC warp between CPUs, turning off TSC clock.
Brought up 2 CPUs
[root@localhost vagrant]#
```

3、free命令查看内存使用状态

```
[root@localhost ~]# free [-b|-k|-m|-g]

选项：
-b 以字节为单位显示
-k 以KB为单位显示
-m 以MB为单位显示
-g 以GB为单位显示
```

```
[root@localhost vagrant]#
[root@localhost vagrant]# free
             total       used       free     shared    buffers     cached
Mem:       1922148     622772    1299376        192      10968      84348
-/+ buffers/cache:     527456    1394692
Swap:      1023996          0    1023996
[root@localhost vagrant]#
[root@localhost vagrant]# free -m
             total       used       free     shared    buffers     cached
Mem:          1877        608       1268          0         10         82
-/+ buffers/cache:        515       1361
Swap:          999          0        999
[root@localhost vagrant]#
```

缓存和缓冲的区别
* 简单来说缓存是用来加速数据从硬盘中“读取”的，而缓冲(buffer)是用来加速数据“写入”硬盘的


4、查看CPU信息

```
[root@localhost ~]# cat  /proc/cpuinfo
```

```
[root@localhost vagrant]# cat /proc/cpuinfo
processor       : 0
vendor_id       : GenuineIntel
cpu family      : 6
model           : 94
model name      : Intel(R) Core(TM) i5-6300HQ CPU @ 2.30GHz
stepping        : 3
microcode       : 25
cpu MHz         : 2274.917
cache size      : 6144 KB
physical id     : 0
siblings        : 2
core id         : 0
cpu cores       : 2
apicid          : 0
initial apicid  : 0
fpu             : yes
fpu_exception   : yes
cpuid level     : 5
wp              : yes
flags           : fpu vme de pse tsc msr pae mce cx8 apic sep mtrr pge mca cmov pat pse36 clflush mmx fxsr sse sse2 ht syscall nx rdtscp lm constant_tsc rep_good pni ssse3 lahf_lm
bogomips        : 4549.83
clflush size    : 64
cache_alignment : 64
address sizes   : 39 bits physical, 48 bits virtual
power management:

processor       : 1
vendor_id       : GenuineIntel
cpu family      : 6
model           : 94
model name      : Intel(R) Core(TM) i5-6300HQ CPU @ 2.30GHz
stepping        : 3
microcode       : 25
cpu MHz         : 2274.917
cache size      : 6144 KB
physical id     : 0
siblings        : 2
core id         : 1
cpu cores       : 2
apicid          : 1
initial apicid  : 1
fpu             : yes
fpu_exception   : yes
cpuid level     : 5
wp              : yes
flags           : fpu vme de pse tsc msr pae mce cx8 apic sep mtrr pge mca cmov pat pse36 clflush mmx fxsr sse sse2 ht syscall nx rdtscp lm constant_tsc rep_good pni ssse3 lahf_lm
bogomips        : 4549.83
clflush size    : 64
cache_alignment : 64
address sizes   : 39 bits physical, 48 bits virtual
power management:

[root@localhost vagrant]#
```

5、uptime命令

```
[root@localhost ~]# uptime
# 显示系统启动时间和平均负载，也就是top命令的第一行，w命令也可以看到这个数据
```

```
[root@localhost vagrant]# uptime
 10:28:38 up  2:22,  1 user,  load average: 0.08, 0.03, 0.00
[root@localhost vagrant]#
[root@localhost vagrant]# w
 10:28:55 up  2:23,  1 user,  load average: 0.05, 0.02, 0.00
USER     TTY      FROM              LOGIN@   IDLE   JCPU   PCPU WHAT
vagrant  pts/0    10.0.2.2         07:45    0.00s  0.40s  0.12s sshd: vagrant [priv]
[root@localhost vagrant]#
```

6、查看系统与内核相关信息

```
[root@localhost ~]# uname  [选项]

选项：
-a 查看系统所有相关信息
-r 查看内核版本
-s 查看内核名称
```

```
[root@localhost vagrant]# uname -a
Linux localhost.localdomain 2.6.32-573.7.1.el6.x86_64 #1 SMP Tue Sep 22 22:00:00 UTC 2015 x86_64 x86_64 x86_64 GNU/Linux
[root@localhost vagrant]#
[root@localhost vagrant]# uname -r
2.6.32-573.7.1.el6.x86_64
[root@localhost vagrant]#
[root@localhost vagrant]# uname -s
Linux
[root@localhost vagrant]#
```

7、判断当前系统的位数

```
[root@localhost ~]# file  /bin/ls
```

```
[root@localhost vagrant]# file /bin/ls
/bin/ls: ELF 64-bit LSB executable, x86-64, version 1 (SYSV), dynamically linked (uses shared libs), for GNU/Linux 2.6.18, stripped
[root@localhost vagrant]#
```

8、查询当前Linux系统的发行版本

```
[root@localhost ~]# lsb_release -a
```

9、列出进程打开或使用的文件信息

```
[root@localhost ~]# lsof  [选项]

选项：
-c  字符串： 只列出字符串开头的进程打开的文件
-u  用户名： 只列出某个用户的进程打开的文件
-p  pid: 列出某个PID进程打开的文件
```

### 13.4 系统定时任务

1、crond服务管理与访问控制

```
[root@localhost ~]# service crond restart
[root@localhost ~]# chkconfig crond on
```

crond为定时任务的后台服务


2、用户的crontab设置

```
[root@localhost ~]# crontab  [选项]

选项：
-e 编辑crontab定时任务
-l 查询crontab任务
-r 删除当前用户所有的crontab任务
```

```
[root@localhost ~]# crontab  -e
# 进入crontab编辑界面，会打开vim编辑你的工作

* * * * * 执行的任务
```

![]({{site.baseurl}}/images/20210516/20210516182012.png)

![]({{site.baseurl}}/images/20210516/20210516182050.png)

![]({{site.baseurl}}/images/20210516/20210516182136.png)

举例：
```
*/5 * * * * /bin/echo "11" >> /tmp/test

5 5 * * 2 /sbin/shutdown -r now

0 5 1,10,15 * * /root/sh/autobak.sh
```

<br/><br/><br/><br/><br/>
## 参考资料

13.3 系统资源查看 <https://www.renrendoc.com/p-82030231.html>

第十三章：13.3 系统资源查看 <https://blog.csdn.net/freedomai/article/details/43087061>

第十三章：13.4 系统定时任务 <https://blog.csdn.net/freedomai/article/details/43087171>


