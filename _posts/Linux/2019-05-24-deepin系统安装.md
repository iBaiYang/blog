---
layout: post
categories: Linux
title: deepin系统安装
meta: deepin系统安装
---
* content
{:toc}

### 正文

#### deepin安装

在官方网站下载稳定版安装包，然后制作启动U盘。

安装前，做好电脑的资料备份工作。然后，以U盘启动，基本都是回车操作，有一个安装模式选择：

简单：

![]({{site.baseurl}}/images/20201114/20201114104555.jpg)

高级：

![]({{site.baseurl}}/images/20201114/20201114104614.jpg)

全盘安装：

![]({{site.baseurl}}/images/20190524/20190524110934.jpg)

是新手，那就选择全盘安装，或者简单安装。关于“高级”安装中磁盘分割的技巧，等熟悉linux后自己随便折腾吧。

这里选择全盘安装，安装好后看一下磁盘分割：

![]({{site.baseurl}}/images/20190524/20190524110945.jpg)

还有挂载点：

![]({{site.baseurl}}/images/20201113/20201113165738.png)

sda1：EFI    挂载点/boot/efi

sda2：primary  swap内存交换分区

sda3：Deepin15.10 Root系统盘    挂载点/

sda4：Home 家目录       挂载点/home

sda5：_dde_data 数据盘     挂载点/media/baiyang/_dde_data

其中 sda5 以及后面你在电脑上的可拔插U盘、硬盘等 名为sdb1、sdb2、sdc等，都挂载在 `/media/baiyang`目录下，baiyang是用户名。

如果系统被搞坏了，需要重装系统，你选择 简单安装 到 sda3 区，你会发现其他盘数据内容都没有变动，还是旧数据，
这说明我们可以把需要的软件和服务环境都放在sda4家目录、或sda5数据盘下，这样系统坏了重装时，服务软件及环境不需要重装。

![]({{site.baseurl}}/images/20201113/20201113151447.png)

![]({{site.baseurl}}/images/20201113/20201113145311.png)

![]({{site.baseurl}}/images/20201113/20201113151648.png)

#### Firefox浏览器安装

Firefox有中国版和国际版，国际版中又有一个ESR版本。中国版和国际版账号不通用，看你的账号在那。

中国版安装，直接在应用商店搜索安装，然后登录火狐账号同步书签信息等。

ESR版本安装： `sudo apt install firefox-esr-l10n-zh-cn`

#### Git安装

git可以用apt安装：`sudo apt install git`

安装完成后设置git用户名和邮箱：

`git config --global user.name kuangtang`

`git config --global user.email kuangtang@dudu.com`

#### Sublime Text安装

在应用商店中搜索 sublime text ，然后点击自己想安装的版本。

#### PhpStorm安装

在官网下载软件包：https://www.jetbrains.com/phpstorm/

然后放到 `/home/baiyang/worksoft` 目录下，解压： `tar xvf PhpStorm-2020.2.3.tar.gz`

移动重命名一下：`mv PhpStorm-202.7660.42 ./PhpStorm`

创建一个软件启动软连接：`sudo ln -s /home/baiyang/worksoft/PhpStorm/bin/phpstorm.sh /usr/local/bin/phpstorm`

然后就可以启动PhpStorm了：`phpstorm`

启动后在启动器软件图标一栏就有phpstorm的图标了，我们鼠标右击选择发送到桌面，以后在桌面点击图标启动使用。

补充信息，旧的版本可能没有实现部署自动化，下面我们说一下。

使用命令行phpstorm启动的方式，关闭命令行窗口，软件就会被关掉，不方便，我们要让软件在后台运行。

编辑.bashrc文件：`vim ~/.bashrc`

写入：
```
alias phpstorm='nohup sh /home/baiyang/worksoft/PhpStorm/bin/phpstorm.sh >/dev/null >/dev/null 2>&1 &'
```

更新.bashrc，执行命令：`source ~/.bashrc`

这样命令行执行phpstorm启动软件，关闭命令行也不会关闭phpstorm了。

为了方便日后使用，我们最好创建一个桌面图标。

`cd /usr/share/applications/` 

`sudo touch phpstorm.desktop`

`sudo vim phpstorm.desktop`

写入内容：
```
[Desktop Entry]
Type=Application
Version=2019.2
Name=phpstorm
Comment=phpstorm ide
Exec=phpstorm
Icon=/home/baiyang/worksoft/PhpStorm/bin/phpstorm.svg
Terminal=false
Categories=Development;IDE;
StartupNotify=true
```

保存，就可以在启动器软件一栏中看到phpstorm的图标了。

#### DBeaver安装

DBeaver是一个通用的数据库管理工具和SQL客户端，支持 MySQL、PostgreSQL、Oracle、 DB2、MSSQL、 Sybase、 Mime、 HSQLDB、Derby以及其他兼容 JDBC 的数据库。
DBeaver 提供一个图形界面用来查看数据库结构、执行SQL查询和脚本，浏览和导出数据，处理BLOB/CLOB数据，修改数据库结构等。

可以直接在应用商店搜索DBeaver下载。

#### PuTTY安装

PuTTY是一套远程登陆工具，它可以连接上支持SSH、Telnet联机的站台，并且可自动取得对方的系统指纹码。建立联机以后，所有的通讯内容都是以加密的方式传输。
自带SSH Forwarding的功能，具有完全模拟xterm、VT102及ECMA-48终端机的能力，支持公钥认证。

可以直接在应用商店搜索PuTTY下载。

#### Postman安装

在官网下载：https://www.postman.com/downloads/

然后放到 `/home/baiyang/worksoft` 目录下，解压：`tar xvf Postman-linux-x64-7.34.0.tar.gz`

进入解压后的 Postman文件夹打开终端，启动 Postman： `./Postman/Postman`

创建一个软件启动软连接：`sudo ln -s /home/baiyang/worksoft/Postman/Postman /usr/local/bin/postman`

创建启动图标Postman.desktop，便于快速启动：

`cd /usr/share/applications/` 

`sudo touch postman.desktop`

`sudo vim postman.desktop`

写入内容：
```
[Desktop Entry]
Type=Application
Name=Postman
GenericName=Postman
Exec=postman
Icon=/home/baiyang/worksoft/Postman/app/resources/app/assets/icon.png
Terminal=false
Categories=Network;
```

保存，就可以在启动器软件一栏中看到Postman的图标了。

点击运行，sign in登录，同步数据。

#### RedisPlus安装

RedisPlus是为Redis可视化管理开发的一款开源免费的桌面客户端软件，支持Windows 、Linux、Mac三大系统平台，
RedisPlus提供更加高效、方便、快捷的使用体验，有着更加现代化的用户界面风格。该软件支持单机、集群模式连接，同时还支持SSH（单机、集群）通道连接。

可以直接在应用商店搜索RedisPlus下载。

#### Docker安装

Docker 的旧版本被称为 docker，docker.io 或 docker-engine 。如果已安装，请卸载它们:
> sudo apt-get remove docker docker-engine docker.io containerd runc

更新 apt 包索引:
> sudo apt-get update

安装 apt 依赖包，用于通过HTTPS来获取仓库:
```
sudo apt-get install  apt-transport-https  ca-certificates  curl  gnupg-agent  software-properties-common
```

添加 Docker 的官方 GPG 密钥:
```
curl -fsSL https://mirrors.ustc.edu.cn/docker-ce/linux/debian/gpg | sudo apt-key add -
```

通过搜索指纹的最后8个字符，验证您现在拥有指纹9DC8 5822 9FC7 DD38 854A E2D8 8D81 803C 0EBF CD88的密钥:
> sudo apt-key fingerprint 0EBFCD88

输出：
```
pub   rsa4096 2017-02-22 [SCEA]
      9DC8 5822 9FC7 DD38 854A  E2D8 8D81 803C 0EBF CD88
uid           [ unknown] Docker Release (CE deb) <docker@docker.com>
sub   rsa4096 2017-02-22 [S]
```

设置docker稳定版储存库，我们可以把源直接写进配置了：
> sudo vim /etc/apt/sources.list

把下面内容补充进去，保存并退出：
```
# 官方源
# deb [arch=amd64] https://download.docker.com/linux/debian wheezy stable
# 国内中科大源
deb [arch=amd64] https://mirrors.ustc.edu.cn/docker-ce/linux/debian stretch stable
```

上面把软件储存库设置好了，下面我们进行安装。

更新 apt 包索引：
> sudo apt-get update

列出可用版本：
> apt-cache madison docker-ce

我们可以安装上面看到的指定版本， 例如 5:19.03.13~3-0~debian-stretch 版：
```
sudo apt-get install docker-ce=5:19.03.13~3-0~debian-stretch docker-ce-cli=5:19.03.13~3-0~debian-stretch containerd.io
```

或者我们可以通过下面的命令直接安装最新版，不过有可能不是稳定版：
> sudo apt-get install docker-ce docker-ce-cli containerd.io

通过以上步骤，Docker就安装好了。

查看一下安装的docker版本：
> sudo docker version

输出：
```
Client: Docker Engine - Community
 Version:           19.03.13
 API version:       1.40
 Go version:        go1.13.15
 Git commit:        4484c46d9d
 Built:             Wed Sep 16 17:03:03 2020
 OS/Arch:           linux/amd64
 Experimental:      false

Server: Docker Engine - Community
 Engine:
  Version:          19.03.13
  API version:      1.40 (minimum version 1.12)
  Go version:       go1.13.15
  Git commit:       4484c46d9d
  Built:            Wed Sep 16 17:01:33 2020
  OS/Arch:          linux/amd64
  Experimental:     false
 containerd:
  Version:          1.3.7
  GitCommit:        8fba4e9a7d01810a393d5d25a3621dc101981175
 runc:
  Version:          1.0.0-rc10
  GitCommit:        dc9208a3303feef5b3839f4323d9beb36df0a9dd
 docker-init:
  Version:          0.18.0
  GitCommit:        fec3683
```

Docker是虚拟化容器引擎，我们可以运行hello world映像，验证Docker引擎是否正确安装：
> sudo docker run hello-world

输出：
```
Unable to find image 'hello-world:latest' locally
latest: Pulling from library/hello-world
0e03bdcc26d7: Pull complete 
Digest: sha256:8c5aeeb6a5f3ba4883347d3747a7249f491766ca1caa47e5da5dfcf6b9b717c0
Status: Downloaded newer image for hello-world:latest

Hello from Docker!
This message shows that your installation appears to be working correctly.

To generate this message, Docker took the following steps:
 1. The Docker client contacted the Docker daemon.
 2. The Docker daemon pulled the "hello-world" image from the Docker Hub.
    (amd64)
 3. The Docker daemon created a new container from that image which runs the
    executable that produces the output you are currently reading.
 4. The Docker daemon streamed that output to the Docker client, which sent it
    to your terminal.

To try something more ambitious, you can run an Ubuntu container with:
 $ docker run -it ubuntu bash

Share images, automate workflows, and more with a free Docker ID:
 https://hub.docker.com/

For more examples and ideas, visit:
 https://docs.docker.com/get-started/
```

此命令下载测试映像并在容器中运行它。当容器运行时，它会打印一条信息性消息并退出。

查看一下docker本地镜像有哪些：
> sudo docker images

输出：
```
REPOSITORY          TAG                 IMAGE ID            CREATED             SIZE
hello-world         latest              bf756fb1ae65        10 months ago       13.3kB
```

查看一下docker默认的远程镜像仓库地址：
> sudo docker info

输出：
```
Client:
 Debug Mode: false

Server:
 Containers: 1
  Running: 0
  Paused: 0
  Stopped: 1
 Images: 1
 Server Version: 19.03.13
 Storage Driver: overlay2
  Backing Filesystem: extfs
  Supports d_type: true
  Native Overlay Diff: true
 Logging Driver: json-file
 Cgroup Driver: cgroupfs
 Plugins:
  Volume: local
  Network: bridge host ipvlan macvlan null overlay
  Log: awslogs fluentd gcplogs gelf journald json-file local logentries splunk syslog
 Swarm: inactive
 Runtimes: runc
 Default Runtime: runc
 Init Binary: docker-init
 containerd version: 8fba4e9a7d01810a393d5d25a3621dc101981175
 runc version: dc9208a3303feef5b3839f4323d9beb36df0a9dd
 init version: fec3683
 Security Options:
  apparmor
  seccomp
   Profile: default
 Kernel Version: 4.15.0-30deepin-generic
 Operating System: Deepin 15
 OSType: linux
 Architecture: x86_64
 CPUs: 4
 Total Memory: 7.679GiB
 Name: pc
 ID: B7VV:SXQH:LLSD:GYZ7:JTCS:XW7J:QVMD:7JM3:BU62:KQBL:EC73:GNNP
 Docker Root Dir: /var/lib/docker
 Debug Mode: false
 Registry: https://index.docker.io/v1/
 Labels:
 Experimental: false
 Insecure Registries:
  127.0.0.0/8
 Live Restore Enabled: false

WARNING: No swap limit support
```

看到 Registry 非国内，为了提升下载速度，我们需要修改docker远程镜像仓库地址：
> vim /etc/docker/daemon.json

写入：
```
{"registry-mirrors": ["https://registry.docker-cn.com"], "live-restore": true}
```

如果daemon.json这个文件不存在的话，我们需要新建，然后再写入：
> sudo touch /etc/docker/daemon.json

重启docker服务：
> service docker restart

再查看一下docker详情，输出：
```
Client:
 Debug Mode: false

Server:
 Containers: 1
  Running: 0
  Paused: 0
  Stopped: 1
 Images: 1
 Server Version: 19.03.13
 Storage Driver: overlay2
  Backing Filesystem: extfs
  Supports d_type: true
  Native Overlay Diff: true
 Logging Driver: json-file
 Cgroup Driver: cgroupfs
 Plugins:
  Volume: local
  Network: bridge host ipvlan macvlan null overlay
  Log: awslogs fluentd gcplogs gelf journald json-file local logentries splunk syslog
 Swarm: inactive
 Runtimes: runc
 Default Runtime: runc
 Init Binary: docker-init
 containerd version: 8fba4e9a7d01810a393d5d25a3621dc101981175
 runc version: dc9208a3303feef5b3839f4323d9beb36df0a9dd
 init version: fec3683
 Security Options:
  apparmor
  seccomp
   Profile: default
 Kernel Version: 4.15.0-30deepin-generic
 Operating System: Deepin 15
 OSType: linux
 Architecture: x86_64
 CPUs: 4
 Total Memory: 7.679GiB
 Name: pc
 ID: B7VV:SXQH:LLSD:GYZ7:JTCS:XW7J:QVMD:7JM3:BU62:KQBL:EC73:GNNP
 Docker Root Dir: /var/lib/docker
 Debug Mode: false
 Registry: https://index.docker.io/v1/
 Labels:
 Experimental: false
 Insecure Registries:
  127.0.0.0/8
 Registry Mirrors:
  https://registry.docker-cn.com/
 Live Restore Enabled: true

WARNING: No swap limit support
```

可以看到最下面增加了 Registry Mirrors 那一行。

现在我们docker相关命令都要用root身份运行，原因参考下面资料。

#### MySQL安装

下载mysql镜像：

> sudo docker pull mysql:5.7

把-v与容器挂载的目录准备好：
> mkdir -p /home/baiyang/web/mysql /home/baiyang/web/mysql/data /home/baiyang/web/mysql/conf.d /home/baiyang/web/mysql/logs 

创建容器并运行：
```
sudo docker run \
  --name server-mysql \
  -p 3306:3306 \
  -e MYSQL_ROOT_PASSWORD=root \
  -v /home/baiyang/web/mysql/data:/var/lib/mysql \
  -v /home/baiyang/web/mysql/conf.d:/etc/mysql/conf.d \
  -v /home/baiyang/web/mysql/logs:/logs \
  -v /etc/localtime:/etc/localtime:ro \
  -d mysql:5.7
```

单行写法：
```
sudo docker run  --name server-mysql   -p 3306:3306   -e MYSQL_ROOT_PASSWORD=root   -v /home/baiyang/web/mysql/data:/var/lib/mysql   -v /home/baiyang/web/mysql/conf.d:/etc/mysql/conf.d   -v /home/baiyang/web/mysql/logs:/logs  -v /etc/localtime:/etc/localtime:ro  -d mysql:5.7
```

MYSQL_ROOT_PASSWORD 是 root 用户连接数据库服务的密码。 

/home/baiyang/web/mysql/data 目录将映射为mysql容器配置的数据文件存放路径

/home/baiyang/web/mysql/conf.d 目录里的配置文件将映射为mysql容器的配置文件

/home/baiyang/web/mysql/logs 目录将映射为mysql容器的日志目录

`-v /etc/localtime:/etc/localtime:ro` 因为容器内的时间会跟宿主机相差 8 个小时，加载这个目录是为了校正时间跟宿主机时间一致。

查看容器运行状态：
> sudo docker ps -a

输出：
```
CONTAINER ID        IMAGE               COMMAND                  CREATED             STATUS                         PORTS                               NAMES
ff5f62aa1f77        mysql:5.7           "docker-entrypoint.s…"   13 seconds ago      Up 11 seconds                  0.0.0.0:3306->3306/tcp, 33060/tcp   server-mysql
af13727aafbb        hello-world         "/hello"                 About an hour ago   Exited (0) About an hour ago                                       objective_kapitsa
```

##### 新建用户和数据库

接下来可以新建用户和新建库：

进入mysql容器：

> sudo docker exec -it server-mysql /bin/bash

首先用root登录mysql

> mysql -u root -p

输入密码，进入。

**创建用户**，语法：
```
CREATE USER 'username'@'host' IDENTIFIED BY 'password';
```

user_name：要创建用户的名字。

host：表示要这个新创建的用户允许从哪台机登陆，如果只允许从本机登陆，则 填　‘localhost’ ，如果允许从远程登陆，则填 ‘%’

password：新创建用户的登陆数据库密码，如果没密码可以不写。

如：
```
CREATE USER 'dog'@'%' IDENTIFIED BY '123456';
```

**创建数据库**：

> CREATE DATABASE IF NOT EXISTS dog DEFAULT CHARSET utf8mb4 COLLATE utf8mb4_general_ci;

**用户数据库赋权**，语法：

> GRANT privileges ON databasename.tablename TO ‘username’@’host’

privileges：表示要授予什么权力，例如可以有 select ， insert ，delete，update等，如果要授予全部权力，则填 ALL

databasename.tablename：表示用户的权限能用在哪个库的哪个表中，如果想要用户的权限很作用于所有的数据库所有的表，则填 *.*，*是一个通配符，表示全部。

’username‘@‘host’：表示授权给哪个用户。

如：
```
GRANT  ALL  ON  dog.*  TO  ‘dog’@‘%’；
```

注意：

用以上命令授权的用户不能给其他用户授权，如果想这个用户能够给其他用户授权，就要在后面加上  WITH GRANT OPTION

如： 
```
GRANT  ALL  ON   *.*   TO  ’aaa‘@'%'  WITH GRANT OPTION； 
```

#### PHP安装



#### Nginx安装








<br/><br/><br/><br/><br/>
### 参考资料

深度科技社区 <https://www.deepin.org>

深度启动盘制作工具 <https://www.deepin.org/original/deepin-boot-maker/>

深度系统（Deepin Linux）U盘安装教程 <http://tangwumo.com/%E6%B7%B1%E5%BA%A6%E7%B3%BB%E7%BB%9F%EF%BC%88deepin-linux%EF%BC%89u%E7%9B%98%E5%AE%89%E8%A3%85%E6%95%99%E7%A8%8B.html>

deepin15.8安装过程(详细) <https://segmentfault.com/a/1190000017033590>

Linux docker安装配置 <https://ibaiyang.github.io/blog/linux/2019/12/19/linux-docker%E5%AE%89%E8%A3%85%E9%85%8D%E7%BD%AE.html>

解决非root用户没有权限运行docker命令的问题 <https://blog.csdn.net/icodestechnology/article/details/97170540>

深度 linux 搭建 php 开发环境 <https://www.jianshu.com/p/d44e912bf1b7>

linux(deepin)在启动器上制作启动图标 <https://blog.csdn.net/zhangjingao/article/details/76546363>

Deepin 15.7 安装 Postman  <http://php-note.com/article/detail/b529a43aa3f94eda93c2fd59956bb1e6>

Deepin 安装 Postman <https://blog.yoyoyo.me/index.php/archives/63/>

深度Deepin系统中，自己安装Firefox <https://www.jianshu.com/p/86d5be359cf5>

Linux安装navicat， 并解决中文乱码 <https://blog.csdn.net/qq_38276669/article/details/82288870>



