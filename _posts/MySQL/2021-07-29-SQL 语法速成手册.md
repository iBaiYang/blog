---
layout: post
categories: MySQL
title: SQL 语法速成手册
meta: SQL 语法速成手册
---
* content
{:toc}

## 正文

本文针对关系型数据库的一般语法。限于篇幅，本文侧重说明用法，不会展开讲解特性、原理。

### 一、基本概念

**数据库术语**

* 数据库（database） - 保存有组织的数据的容器（通常是一个文件或一组文件）。
* 数据表（table） - 某种特定类型数据的结构化清单。
* 模式（schema） - 关于数据库和表的布局及特性的信息。模式定义了数据在表中如何存储，包含存储什么样的数据，
  数据如何分解，各部分信息如何命名等信息。数据库和表都有模式。
* 列（column） - 表中的一个字段。所有表都是由一个或多个列组成的。
* 行（row） - 表中的一个记录。
* 主键（primary key） - 一列（或一组列），其值能够唯一标识表中每一行。

**SQL 语法**

SQL（Structured Query Language)，标准 SQL 由 ANSI 标准委员会管理，从而称为 ANSI SQL。
各个 DBMS 都有自己的实现，如 PL/SQL、Transact-SQL 等。

**SQL 语法结构**

![]({{site.baseurl}}/images/20210729/20210729144112.png)

SQL 语法结构包括：

* 子句 - 是语句和查询的组成成分。（在某些情况下，这些都是可选的。）
* 表达式 - 可以产生任何标量值，或由列和行的数据库表
* 谓词 - 给需要评估的 SQL 三值逻辑（3VL）（true/false/unknown）或布尔真值指定条件，并限制语句和查询的效果，或改变程序流程。
* 查询 - 基于特定条件检索数据。这是 SQL 的一个重要组成部分。
* 语句 - 可以持久地影响纲要和数据，也可以控制数据库事务、程序流程、连接、会话或诊断。

**SQL 语法要点**

* SQL 语句不区分大小写，但是数据库表名、列名和值是否区分，依赖于具体的 DBMS 以及配置。 例如：SELECT 与 select 、Select 是相同的。
* 多条 SQL 语句必须以分号（;）分隔。
* 处理 SQL 语句时，所有空格都被忽略。SQL 语句可以写成一行，也可以分写为多行。

```
-- 一行 SQL 语句
UPDATE user SET username='robot', password='robot' WHERE username = 'root';

-- 多行 SQL 语句
UPDATE user
SET username='robot', password='robot'
WHERE username = 'root';
```

* SQL 支持三种注释

```
## 注释1
-- 注释2
/* 注释3 */
```

#### SQL 分类

**数据定义语言（DDL）**

数据定义语言（Data Definition Language，DDL）是 SQL 语言集中负责数据结构定义与数据库对象定义的语言。

DDL 的主要功能是定义数据库对象。

DDL 的核心指令是 CREATE、ALTER、DROP。

**数据操纵语言（DML）**

数据操纵语言（Data Manipulation Language, DML）是用于数据库操作，对数据库其中的对象和数据运行访问工作的编程语句。

DML 的主要功能是 访问数据，因此其语法都是以读写数据库为主。

DML 的核心指令是 INSERT、UPDATE、DELETE、SELECT。这四个指令合称 CRUD(Create, Read, Update, Delete)，即增删改查。

**事务控制语言（TCL）**

事务控制语言 (Transaction Control Language, TCL) 用于管理数据库中的事务。
这些用于管理由 DML 语句所做的更改。它还允许将语句分组为逻辑事务。

TCL 的核心指令是 COMMIT、ROLLBACK。

**数据控制语言（DCL）**

数据控制语言 (Data Control Language, DCL) 是一种可对数据访问权进行控制的指令，
它可以控制特定用户账户对数据表、查看表、预存程序、用户自定义函数等数据库对象的控制权。

DCL 的核心指令是 GRANT、REVOKE。

DCL 以控制用户的访问权限为主，因此其指令做法并不复杂，可利用 DCL 控制的权限有：
CONNECT、SELECT、INSERT、UPDATE、DELETE、EXECUTE、USAGE、REFERENCES。

根据不同的 DBMS 以及不同的安全性实体，其支持的权限控制也有所不同。

（以下为 DML 语句用法）

### 二、增删改查

增删改查，又称为 CRUD，数据库基本操作中的基本操作。

**插入数据**

INSERT INTO 语句用于向表中插入新记录。

插入完整的行
```
INSERT INTO user
VALUES (10, 'root', 'root', 'xxxx@163.com');
```

插入行的一部分
```
INSERT INTO user(username, password, email)
VALUES ('admin', 'admin', 'xxxx@163.com');
```

插入查询出来的数据
```
INSERT INTO user(username)
SELECT name
FROM account;
```

**更新数据**

UPDATE 语句用于更新表中的记录。
```
UPDATE user
SET username='robot', password='robot'
WHERE username = 'root';
```

**删除数据**

DELETE 语句用于删除表中的记录。

TRUNCATE TABLE 可以清空表，也就是删除所有行。

删除表中的指定数据
```
DELETE FROM user
WHERE username = 'robot';
```

清空表中的数据
```
TRUNCATE TABLE user;
```

**查询数据**

SELECT 语句用于从数据库中查询数据。

DISTINCT 用于返回唯一不同的值。它作用于所有列，也就是说所有列的值都相同才算相同。

LIMIT 限制返回的行数。可以有两个参数，第一个参数为起始行，从 0 开始；第二个参数为返回的总行数。

ASC ：升序（默认）

DESC ：降序

查询单列
```
SELECT prod_name
FROM products;
```

查询多列
```
SELECT prod_id, prod_name, prod_price
FROM products;
```

查询所有列
```
ELECT *
FROM products;
```

查询不同的值
```
SELECT DISTINCT
vend_id FROM products;
```

限制查询结果
```
-- 返回前 5 行
SELECT * FROM mytable LIMIT 5;
SELECT * FROM mytable LIMIT 0, 5;
-- 返回第 3 ~ 5 行
SELECT * FROM mytable LIMIT 2, 3;
```







<br/><br/><br/><br/><br/>
## 参考资料

SQL 语法速成手册 <https://mp.weixin.qq.com/s/6_yfUebDFXv8bSGd8abbnQ>

MySQL详细知识点总结 <ttps://mp.weixin.qq.com/s?__biz=MzU5OTkxOTYxMA==&mid=2247506621&idx=3&sn=7183a60b6e3f5f19f601db8f790f03c8&chksm=feaf0428c9d88d3e564df55b36b96a0bd1fbaa2e1095fafe3928dffecf4e4c1fbc73ef0194f9&scene=132#wechat_redirect>

