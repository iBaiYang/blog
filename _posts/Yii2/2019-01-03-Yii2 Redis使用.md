---
layout: post
categories: Yii2
title: Yii2 Redis使用
meta: Redis使用
---
* content
{:toc}

#### 正文

Redis使用

使用Yii2的redis组件，需要先加载依赖，composer.json中引入yii2-redis：

```
"require": {
    // 其他依赖...
    "yiisoft/yii2-redis": "~2.0.0",
},
```

再执行下面命令安装：

> composer update

添加配置：

```
'components' => [
    'redis' => [
        'class' => 'yii\redis\Connection',
        'hostname' => 'test.redis.yuming.com',  // 自定义，多为localhost
        'port' => 6379,
        'database' => 0,
    ],
    ...
],
```

然后开始使用：

```
// 获取 redis 组件
$redis = Yii::$app->redis;

// 判断 key 为 username 的是否有值，有则打印，没有则赋值
$key = 'username';
if ($val = $redis->get($key);) {
    var_dump($val);
} else {
    $redis->set($key, 'xiaozhang');
    $redis->expire($key, 5 * 60);
}
```


<br/><br/><br/><br/><br/>
#### 参考资料

yii2-redis 扩展详解 <https://www.yiichina.com/doc/guide/2.0/yii2-redis?language=zh-cn>

yii2-redis 扩展详解 <https://www.yiichina.com/tutorial/1608>

